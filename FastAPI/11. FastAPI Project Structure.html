<!DOCTYPE html>
<html>
<head>
<title>11. FastAPI Project Structure.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="%F0%9F%9A%80-fastapi-project-structure-enhanced-version">ğŸš€ FastAPI Project Structure (Enhanced Version)</h1>
<p>Based on your Node.js backend with descriptive naming conventions, here's the enhanced FastAPI project structure:</p>
<h2 id="%F0%9F%93%81-enhanced-project-structure">ğŸ“ Enhanced Project Structure</h2>
<pre class="hljs"><code><div>fastapi-backend/
â”œâ”€â”€ ğŸ“„ .env.sample
â”œâ”€â”€ ğŸ“„ .gitignore
â”œâ”€â”€ ğŸ“„ requirements.txt
â”œâ”€â”€ ğŸ“„ pyproject.toml
â”œâ”€â”€ ğŸ“„ README.md
â”œâ”€â”€ ğŸ“„ main.py
â”œâ”€â”€ ğŸ“ app/
â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”œâ”€â”€ ğŸ“„ main.py
â”‚   â”œâ”€â”€ ğŸ“„ config.py
â”‚   â”œâ”€â”€ ğŸ“„ constants.py
â”‚   â”œâ”€â”€ ğŸ“ api/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ dependencies.py
â”‚   â”‚   â””â”€â”€ ğŸ“ v1/
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ api.py
â”‚   â”‚       â””â”€â”€ ğŸ“ routes/
â”‚   â”‚           â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚           â”œâ”€â”€ ğŸ“„ auth.route.py
â”‚   â”‚           â”œâ”€â”€ ğŸ“„ user.route.py
â”‚   â”‚           â”œâ”€â”€ ğŸ“„ video.route.py
â”‚   â”‚           â”œâ”€â”€ ğŸ“„ comment.route.py
â”‚   â”‚           â”œâ”€â”€ ğŸ“„ like.route.py
â”‚   â”‚           â”œâ”€â”€ ğŸ“„ playlist.route.py
â”‚   â”‚           â”œâ”€â”€ ğŸ“„ subscription.route.py
â”‚   â”‚           â””â”€â”€ ğŸ“„ tweet.route.py
â”‚   â”œâ”€â”€ ğŸ“ core/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ config.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ security.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ settings.py
â”‚   â”œâ”€â”€ ğŸ“ db/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ base.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ database.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ session.py
â”‚   â”‚   â””â”€â”€ ğŸ“ migrations/
â”‚   â”‚       â””â”€â”€ ğŸ“„ __init__.py
â”‚   â”œâ”€â”€ ğŸ“ models/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ base.model.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ user.model.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ video.model.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ comment.model.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ like.model.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ playlist.model.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ subscription.model.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ tweet.model.py
â”‚   â”œâ”€â”€ ğŸ“ schemas/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ user.schema.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ video.schema.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ comment.schema.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ like.schema.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ playlist.schema.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ subscription.schema.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ tweet.schema.py
â”‚   â”œâ”€â”€ ğŸ“ controllers/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ user.controller.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ video.controller.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ comment.controller.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ like.controller.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ playlist.controller.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ subscription.controller.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ tweet.controller.py
â”‚   â”œâ”€â”€ ğŸ“ services/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ user.service.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ video.service.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ comment.service.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ like.service.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ playlist.service.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ subscription.service.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ tweet.service.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ auth.service.py
â”‚   â”œâ”€â”€ ğŸ“ middlewares/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ cors.middleware.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ auth.middleware.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ logging.middleware.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ error.middleware.py
â”‚   â””â”€â”€ ğŸ“ utils/
â”‚       â”œâ”€â”€ ğŸ“„ __init__.py
â”‚       â”œâ”€â”€ ğŸ“„ helpers.util.py
â”‚       â”œâ”€â”€ ğŸ“„ validators.util.py
â”‚       â”œâ”€â”€ ğŸ“„ exceptions.util.py
â”‚       â”œâ”€â”€ ğŸ“„ responses.util.py
â”‚       â””â”€â”€ ğŸ“„ constants.util.py
â”œâ”€â”€ ğŸ“ tests/
â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”œâ”€â”€ ğŸ“„ conftest.py
â”‚   â”œâ”€â”€ ğŸ“ api/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_user.route.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_video.route.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ test_auth.route.py
â”‚   â”œâ”€â”€ ğŸ“ controllers/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_user.controller.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ test_video.controller.py
â”‚   â””â”€â”€ ğŸ“ services/
â”‚       â”œâ”€â”€ ğŸ“„ __init__.py
â”‚       â”œâ”€â”€ ğŸ“„ test_user.service.py
â”‚       â””â”€â”€ ğŸ“„ test_video.service.py
â””â”€â”€ ğŸ“ static/
    â”œâ”€â”€ ğŸ“ css/
    â”œâ”€â”€ ğŸ“ js/
    â”œâ”€â”€ ğŸ“ images/
    â””â”€â”€ ğŸ“ uploads/
        â”œâ”€â”€ ğŸ“ videos/
        â”œâ”€â”€ ğŸ“ thumbnails/
        â””â”€â”€ ğŸ“ avatars/
</div></code></pre>
<h2 id="%F0%9F%8E%AF-enhanced-file-examples">ğŸ¯ <strong>Enhanced File Examples</strong></h2>
<h3 id="%F0%9F%93%84-approutesuserroutepy"><strong>ğŸ“„ app/routes/user.route.py</strong></h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> APIRouter, Depends, HTTPException, status
<span class="hljs-keyword">from</span> sqlalchemy.orm <span class="hljs-keyword">import</span> Session
<span class="hljs-keyword">from</span> app.db.session <span class="hljs-keyword">import</span> get_db
<span class="hljs-keyword">from</span> app.controllers.user.controller <span class="hljs-keyword">import</span> UserController
<span class="hljs-keyword">from</span> app.schemas.user.schema <span class="hljs-keyword">import</span> UserCreate, UserResponse, UserUpdate
<span class="hljs-keyword">from</span> app.middlewares.auth.middleware <span class="hljs-keyword">import</span> get_current_user

router = APIRouter(prefix=<span class="hljs-string">"/users"</span>, tags=[<span class="hljs-string">"users"</span>])

<span class="hljs-meta">@router.post("/", response_model=UserResponse, status_code=status.HTTP_201_CREATED)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_user</span><span class="hljs-params">(user: UserCreate, db: Session = Depends<span class="hljs-params">(get_db)</span>)</span>:</span>
    <span class="hljs-string">"""Create a new user account"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> UserController.create_user(db, user)

<span class="hljs-meta">@router.get("/me", response_model=UserResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_current_user_profile</span><span class="hljs-params">(current_user = Depends<span class="hljs-params">(get_current_user)</span>)</span>:</span>
    <span class="hljs-string">"""Get current user profile"""</span>
    <span class="hljs-keyword">return</span> current_user

<span class="hljs-meta">@router.get("/{user_id}", response_model=UserResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_user_by_id</span><span class="hljs-params">(user_id: int, db: Session = Depends<span class="hljs-params">(get_db)</span>)</span>:</span>
    <span class="hljs-string">"""Get user by ID"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> UserController.get_user_by_id(db, user_id)

<span class="hljs-meta">@router.patch("/me", response_model=UserResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update_user_profile</span><span class="hljs-params">(
    user_update: UserUpdate,
    current_user = Depends<span class="hljs-params">(get_current_user)</span>,
    db: Session = Depends<span class="hljs-params">(get_db)</span>
)</span>:</span>
    <span class="hljs-string">"""Update current user profile"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> UserController.update_user(db, current_user.id, user_update)

<span class="hljs-meta">@router.delete("/me", status_code=status.HTTP_204_NO_CONTENT)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">delete_user_account</span><span class="hljs-params">(
    current_user = Depends<span class="hljs-params">(get_current_user)</span>,
    db: Session = Depends<span class="hljs-params">(get_db)</span>
)</span>:</span>
    <span class="hljs-string">"""Delete current user account"""</span>
    <span class="hljs-keyword">await</span> UserController.delete_user(db, current_user.id)
</div></code></pre>
<h3 id="%F0%9F%93%84-appmodelsusermodelpy"><strong>ğŸ“„ app/models/user.model.py</strong></h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> sqlalchemy <span class="hljs-keyword">import</span> Column, Integer, String, DateTime, Boolean, Text
<span class="hljs-keyword">from</span> sqlalchemy.sql <span class="hljs-keyword">import</span> func
<span class="hljs-keyword">from</span> sqlalchemy.orm <span class="hljs-keyword">import</span> relationship
<span class="hljs-keyword">from</span> app.db.base <span class="hljs-keyword">import</span> Base

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span><span class="hljs-params">(Base)</span>:</span>
    __tablename__ = <span class="hljs-string">"users"</span>
    
    id = Column(Integer, primary_key=<span class="hljs-literal">True</span>, index=<span class="hljs-literal">True</span>)
    username = Column(String(<span class="hljs-number">50</span>), unique=<span class="hljs-literal">True</span>, index=<span class="hljs-literal">True</span>, nullable=<span class="hljs-literal">False</span>)
    email = Column(String(<span class="hljs-number">100</span>), unique=<span class="hljs-literal">True</span>, index=<span class="hljs-literal">True</span>, nullable=<span class="hljs-literal">False</span>)
    full_name = Column(String(<span class="hljs-number">100</span>), nullable=<span class="hljs-literal">True</span>)
    avatar = Column(String(<span class="hljs-number">255</span>), nullable=<span class="hljs-literal">True</span>)
    cover_image = Column(String(<span class="hljs-number">255</span>), nullable=<span class="hljs-literal">True</span>)
    watch_history = Column(Text, nullable=<span class="hljs-literal">True</span>)
    password = Column(String(<span class="hljs-number">255</span>), nullable=<span class="hljs-literal">False</span>)
    refresh_token = Column(Text, nullable=<span class="hljs-literal">True</span>)
    is_active = Column(Boolean, default=<span class="hljs-literal">True</span>)
    is_verified = Column(Boolean, default=<span class="hljs-literal">False</span>)
    created_at = Column(DateTime(timezone=<span class="hljs-literal">True</span>), server_default=func.now())
    updated_at = Column(DateTime(timezone=<span class="hljs-literal">True</span>), onupdate=func.now())
    
    <span class="hljs-comment"># Relationships</span>
    videos = relationship(<span class="hljs-string">"Video"</span>, back_populates=<span class="hljs-string">"owner"</span>)
    comments = relationship(<span class="hljs-string">"Comment"</span>, back_populates=<span class="hljs-string">"owner"</span>)
    likes = relationship(<span class="hljs-string">"Like"</span>, back_populates=<span class="hljs-string">"user"</span>)
    playlists = relationship(<span class="hljs-string">"Playlist"</span>, back_populates=<span class="hljs-string">"owner"</span>)
    subscriptions_given = relationship(<span class="hljs-string">"Subscription"</span>, foreign_keys=<span class="hljs-string">"Subscription.subscriber_id"</span>, back_populates=<span class="hljs-string">"subscriber"</span>)
    subscriptions_received = relationship(<span class="hljs-string">"Subscription"</span>, foreign_keys=<span class="hljs-string">"Subscription.channel_id"</span>, back_populates=<span class="hljs-string">"channel"</span>)
    tweets = relationship(<span class="hljs-string">"Tweet"</span>, back_populates=<span class="hljs-string">"owner"</span>)
</div></code></pre>
<h3 id="%F0%9F%93%84-appmodelsvideomodelpy"><strong>ğŸ“„ app/models/video.model.py</strong></h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> sqlalchemy <span class="hljs-keyword">import</span> Column, Integer, String, DateTime, Boolean, Text, ForeignKey
<span class="hljs-keyword">from</span> sqlalchemy.sql <span class="hljs-keyword">import</span> func
<span class="hljs-keyword">from</span> sqlalchemy.orm <span class="hljs-keyword">import</span> relationship
<span class="hljs-keyword">from</span> app.db.base <span class="hljs-keyword">import</span> Base

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Video</span><span class="hljs-params">(Base)</span>:</span>
    __tablename__ = <span class="hljs-string">"videos"</span>
    
    id = Column(Integer, primary_key=<span class="hljs-literal">True</span>, index=<span class="hljs-literal">True</span>)
    video_file = Column(String(<span class="hljs-number">255</span>), nullable=<span class="hljs-literal">False</span>)
    thumbnail = Column(String(<span class="hljs-number">255</span>), nullable=<span class="hljs-literal">False</span>)
    title = Column(String(<span class="hljs-number">200</span>), nullable=<span class="hljs-literal">False</span>)
    description = Column(Text, nullable=<span class="hljs-literal">True</span>)
    duration = Column(Integer, nullable=<span class="hljs-literal">False</span>)  <span class="hljs-comment"># in seconds</span>
    views = Column(Integer, default=<span class="hljs-number">0</span>)
    is_published = Column(Boolean, default=<span class="hljs-literal">False</span>)
    owner_id = Column(Integer, ForeignKey(<span class="hljs-string">"users.id"</span>), nullable=<span class="hljs-literal">False</span>)
    created_at = Column(DateTime(timezone=<span class="hljs-literal">True</span>), server_default=func.now())
    updated_at = Column(DateTime(timezone=<span class="hljs-literal">True</span>), onupdate=func.now())
    
    <span class="hljs-comment"># Relationships</span>
    owner = relationship(<span class="hljs-string">"User"</span>, back_populates=<span class="hljs-string">"videos"</span>)
    comments = relationship(<span class="hljs-string">"Comment"</span>, back_populates=<span class="hljs-string">"video"</span>)
    likes = relationship(<span class="hljs-string">"Like"</span>, back_populates=<span class="hljs-string">"video"</span>)
</div></code></pre>
<h3 id="%F0%9F%93%84-appcontrollersusercontrollerpy"><strong>ğŸ“„ app/controllers/user.controller.py</strong></h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> sqlalchemy.orm <span class="hljs-keyword">import</span> Session
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> HTTPException, status
<span class="hljs-keyword">from</span> app.models.user.model <span class="hljs-keyword">import</span> User
<span class="hljs-keyword">from</span> app.schemas.user.schema <span class="hljs-keyword">import</span> UserCreate, UserUpdate
<span class="hljs-keyword">from</span> app.services.user.service <span class="hljs-keyword">import</span> UserService
<span class="hljs-keyword">from</span> app.utils.responses.util <span class="hljs-keyword">import</span> success_response, error_response

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span>:</span>
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_user</span><span class="hljs-params">(db: Session, user: UserCreate)</span>:</span>
        <span class="hljs-string">"""Create a new user"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># Check if user already exists</span>
            existing_user = <span class="hljs-keyword">await</span> UserService.get_user_by_email(db, user.email)
            <span class="hljs-keyword">if</span> existing_user:
                <span class="hljs-keyword">raise</span> HTTPException(
                    status_code=status.HTTP_400_BAD_REQUEST,
                    detail=<span class="hljs-string">"User with this email already exists"</span>
                )
            
            new_user = <span class="hljs-keyword">await</span> UserService.create_user(db, user)
            <span class="hljs-keyword">return</span> success_response(
                data=new_user,
                message=<span class="hljs-string">"User created successfully"</span>
            )
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                detail=str(e)
            )
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_user_by_id</span><span class="hljs-params">(db: Session, user_id: int)</span>:</span>
        <span class="hljs-string">"""Get user by ID"""</span>
        user = <span class="hljs-keyword">await</span> UserService.get_user_by_id(db, user_id)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user:
            <span class="hljs-keyword">raise</span> HTTPException(
                status_code=status.HTTP_404_NOT_FOUND,
                detail=<span class="hljs-string">"User not found"</span>
            )
        <span class="hljs-keyword">return</span> success_response(data=user)
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update_user</span><span class="hljs-params">(db: Session, user_id: int, user_update: UserUpdate)</span>:</span>
        <span class="hljs-string">"""Update user"""</span>
        updated_user = <span class="hljs-keyword">await</span> UserService.update_user(db, user_id, user_update)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> updated_user:
            <span class="hljs-keyword">raise</span> HTTPException(
                status_code=status.HTTP_404_NOT_FOUND,
                detail=<span class="hljs-string">"User not found"</span>
            )
        <span class="hljs-keyword">return</span> success_response(
            data=updated_user,
            message=<span class="hljs-string">"User updated successfully"</span>
        )
</div></code></pre>
<h3 id="%F0%9F%93%84-appservicesuserservicepy"><strong>ğŸ“„ app/services/user.service.py</strong></h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> sqlalchemy.orm <span class="hljs-keyword">import</span> Session
<span class="hljs-keyword">from</span> sqlalchemy <span class="hljs-keyword">import</span> or_
<span class="hljs-keyword">from</span> app.models.user.model <span class="hljs-keyword">import</span> User
<span class="hljs-keyword">from</span> app.schemas.user.schema <span class="hljs-keyword">import</span> UserCreate, UserUpdate
<span class="hljs-keyword">from</span> app.utils.helpers.util <span class="hljs-keyword">import</span> hash_password
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Optional

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserService</span>:</span>
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_user</span><span class="hljs-params">(db: Session, user: UserCreate)</span> -&gt; User:</span>
        <span class="hljs-string">"""Create a new user"""</span>
        hashed_password = hash_password(user.password)
        db_user = User(
            username=user.username,
            email=user.email,
            full_name=user.full_name,
            password=hashed_password
        )
        db.add(db_user)
        db.commit()
        db.refresh(db_user)
        <span class="hljs-keyword">return</span> db_user
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_user_by_id</span><span class="hljs-params">(db: Session, user_id: int)</span> -&gt; Optional[User]:</span>
        <span class="hljs-string">"""Get user by ID"""</span>
        <span class="hljs-keyword">return</span> db.query(User).filter(User.id == user_id).first()
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_user_by_email</span><span class="hljs-params">(db: Session, email: str)</span> -&gt; Optional[User]:</span>
        <span class="hljs-string">"""Get user by email"""</span>
        <span class="hljs-keyword">return</span> db.query(User).filter(User.email == email).first()
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_user_by_username</span><span class="hljs-params">(db: Session, username: str)</span> -&gt; Optional[User]:</span>
        <span class="hljs-string">"""Get user by username"""</span>
        <span class="hljs-keyword">return</span> db.query(User).filter(User.username == username).first()
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update_user</span><span class="hljs-params">(db: Session, user_id: int, user_update: UserUpdate)</span> -&gt; Optional[User]:</span>
        <span class="hljs-string">"""Update user"""</span>
        db_user = db.query(User).filter(User.id == user_id).first()
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> db_user:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        
        update_data = user_update.dict(exclude_unset=<span class="hljs-literal">True</span>)
        <span class="hljs-keyword">for</span> field, value <span class="hljs-keyword">in</span> update_data.items():
            setattr(db_user, field, value)
        
        db.commit()
        db.refresh(db_user)
        <span class="hljs-keyword">return</span> db_user
</div></code></pre>
<h3 id="%F0%9F%93%84-appschemasuserschemapy"><strong>ğŸ“„ app/schemas/user.schema.py</strong></h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, EmailStr, validator
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Optional, List

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserBase</span><span class="hljs-params">(BaseModel)</span>:</span>
    username: str
    email: EmailStr
    full_name: Optional[str] = <span class="hljs-literal">None</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserCreate</span><span class="hljs-params">(UserBase)</span>:</span>
    password: str
    
<span class="hljs-meta">    @validator('password')</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_password</span><span class="hljs-params">(cls, v)</span>:</span>
        <span class="hljs-keyword">if</span> len(v) &lt; <span class="hljs-number">8</span>:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">'Password must be at least 8 characters long'</span>)
        <span class="hljs-keyword">return</span> v

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserUpdate</span><span class="hljs-params">(BaseModel)</span>:</span>
    username: Optional[str] = <span class="hljs-literal">None</span>
    email: Optional[EmailStr] = <span class="hljs-literal">None</span>
    full_name: Optional[str] = <span class="hljs-literal">None</span>
    avatar: Optional[str] = <span class="hljs-literal">None</span>
    cover_image: Optional[str] = <span class="hljs-literal">None</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserResponse</span><span class="hljs-params">(UserBase)</span>:</span>
    id: int
    avatar: Optional[str] = <span class="hljs-literal">None</span>
    cover_image: Optional[str] = <span class="hljs-literal">None</span>
    is_active: bool
    is_verified: bool
    created_at: datetime
    updated_at: Optional[datetime] = <span class="hljs-literal">None</span>
    
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Config</span>:</span>
        from_attributes = <span class="hljs-literal">True</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserLogin</span><span class="hljs-params">(BaseModel)</span>:</span>
    username: str  <span class="hljs-comment"># Can be username or email</span>
    password: str
</div></code></pre>
<h2 id="%F0%9F%8E%A8-enhanced-naming-conventions">ğŸ¨ <strong>Enhanced Naming Conventions</strong></h2>
<table>
<thead>
<tr>
<th style="text-align:left">Component</th>
<th style="text-align:left">Convention</th>
<th style="text-align:left">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Routes</strong></td>
<td style="text-align:left"><code>{resource}.route.py</code></td>
<td style="text-align:left"><code>user.route.py</code>, <code>video.route.py</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Models</strong></td>
<td style="text-align:left"><code>{resource}.model.py</code></td>
<td style="text-align:left"><code>user.model.py</code>, <code>comment.model.py</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Controllers</strong></td>
<td style="text-align:left"><code>{resource}.controller.py</code></td>
<td style="text-align:left"><code>user.controller.py</code>, <code>playlist.controller.py</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Services</strong></td>
<td style="text-align:left"><code>{resource}.service.py</code></td>
<td style="text-align:left"><code>user.service.py</code>, <code>subscription.service.py</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Schemas</strong></td>
<td style="text-align:left"><code>{resource}.schema.py</code></td>
<td style="text-align:left"><code>user.schema.py</code>, <code>tweet.schema.py</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Middlewares</strong></td>
<td style="text-align:left"><code>{purpose}.middleware.py</code></td>
<td style="text-align:left"><code>auth.middleware.py</code>, <code>cors.middleware.py</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Utils</strong></td>
<td style="text-align:left"><code>{purpose}.util.py</code></td>
<td style="text-align:left"><code>helpers.util.py</code>, <code>validators.util.py</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>Tests</strong></td>
<td style="text-align:left"><code>test_{resource}.{type}.py</code></td>
<td style="text-align:left"><code>test_user.route.py</code>, <code>test_video.service.py</code></td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%8C%9F-key-enhancements">ğŸŒŸ <strong>Key Enhancements</strong></h2>
<ul>
<li><strong>ğŸ¯ Clear Purpose</strong>: Each file name immediately indicates its function</li>
<li><strong>ğŸ“± Social Media Ready</strong>: Complete structure for YouTube/Twitter-like platform</li>
<li><strong>ğŸ”„ Consistent</strong>: All naming follows the same <code>.{type}.py</code> pattern</li>
<li><strong>ğŸ§ª Test Ready</strong>: Organized test structure matching main codebase</li>
<li><strong>ğŸ“ Media Support</strong>: Static folders for uploads (videos, thumbnails, avatars)</li>
<li><strong>ğŸ”’ Security First</strong>: Dedicated auth middleware and services</li>
<li><strong>ğŸ“Š Response Standards</strong>: Consistent response utilities</li>
<li><strong>ğŸš€ Scalable</strong>: Easy to add new features following the same pattern</li>
</ul>
<hr>
<h1 id="%F0%9F%8F%97%EF%B8%8F-fastapi-module-functionality-structure">ğŸ—ï¸ FastAPI Module-Functionality Structure</h1>
<h2 id="%F0%9F%93%96-overview">ğŸ“– Overview</h2>
<p>The <strong>Module-Functionality</strong> approach organizes files based on feature domains rather than file types. Each module contains all the components it needs (routes, models, schemas, services) in one cohesive package.</p>
<blockquote>
<p>ğŸ’¡ <strong>Best For</strong>: Monolithic applications with multiple domains and complex business logic</p>
</blockquote>
<h2 id="%F0%9F%8E%AF-key-benefits">ğŸ¯ Key Benefits</h2>
<table>
<thead>
<tr>
<th>Benefit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ğŸ¯ <strong>Domain Focus</strong></td>
<td>All related functionality grouped together</td>
</tr>
<tr>
<td>ğŸš€ <strong>Development Efficiency</strong></td>
<td>Faster feature development and debugging</td>
</tr>
<tr>
<td>ğŸ” <strong>Better Maintainability</strong></td>
<td>Easy to locate and modify domain-specific code</td>
</tr>
<tr>
<td>ğŸ“¦ <strong>Scalability</strong></td>
<td>Simple to add new modules without affecting others</td>
</tr>
<tr>
<td>ğŸ‘¥ <strong>Team Collaboration</strong></td>
<td>Teams can work on different modules independently</td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%93%81-complete-project-structure">ğŸ“ Complete Project Structure</h2>
<pre class="hljs"><code><div>fastapi-project/
â”œâ”€â”€ ğŸ“ alembic/                    # Database migrations
â”‚   â”œâ”€â”€ ğŸ“„ env.py
â”‚   â”œâ”€â”€ ğŸ“„ script.py.mako
â”‚   â””â”€â”€ ğŸ“ versions/
â”œâ”€â”€ ğŸ“ src/                        # Main application source
â”‚   â”œâ”€â”€ ğŸ“ auth/                   # ğŸ” Authentication Module
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ router.py           # Auth endpoints &amp; routes
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ schemas.py          # Pydantic request/response models
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ models.py           # Database models (User, Token, etc.)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ service.py          # Business logic (login, register, etc.)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ dependencies.py     # Auth dependencies &amp; middleware
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ config.py           # Auth-specific configurations
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ constants.py        # Auth constants &amp; error codes
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ exceptions.py       # Auth-specific exceptions
â”‚   â”‚   â””â”€â”€ ğŸ“„ utils.py            # Helper functions (password hashing, etc.)
â”‚   â”œâ”€â”€ ğŸ“ users/                  # ğŸ‘¤ User Management Module
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ router.py           # User CRUD endpoints
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ schemas.py          # User request/response schemas
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ models.py           # User database models
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ service.py          # User business logic
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ dependencies.py     # User-specific dependencies
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ constants.py        # User constants
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ exceptions.py       # User-specific exceptions
â”‚   â”‚   â””â”€â”€ ğŸ“„ utils.py            # User utility functions
â”‚   â”œâ”€â”€ ğŸ“ posts/                  # ğŸ“ Posts Management Module
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ router.py           # Post CRUD endpoints
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ schemas.py          # Post schemas
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ models.py           # Post database models
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ service.py          # Post business logic
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ dependencies.py     # Post dependencies
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ constants.py        # Post constants
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ exceptions.py       # Post exceptions
â”‚   â”‚   â””â”€â”€ ğŸ“„ utils.py            # Post utilities
â”‚   â”œâ”€â”€ ğŸ“ aws/                    # â˜ï¸ AWS Integration Module
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ client.py           # AWS service clients
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ schemas.py          # AWS request/response schemas
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ config.py           # AWS configurations
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ constants.py        # AWS constants
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ exceptions.py       # AWS-specific exceptions
â”‚   â”‚   â””â”€â”€ ğŸ“„ utils.py            # AWS utility functions
â”‚   â”œâ”€â”€ ğŸ“ notifications/          # ğŸ”” Notification Module
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ router.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ schemas.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ models.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ service.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ dependencies.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ constants.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ exceptions.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ utils.py
â”‚   â”œâ”€â”€ ğŸ“„ main.py                 # ğŸš€ FastAPI app initialization
â”‚   â”œâ”€â”€ ğŸ“„ config.py               # ğŸ”§ Global configurations
â”‚   â”œâ”€â”€ ğŸ“„ database.py             # ğŸ—„ï¸ Database connection setup
â”‚   â”œâ”€â”€ ğŸ“„ models.py               # ğŸŒ Global database models
â”‚   â”œâ”€â”€ ğŸ“„ exceptions.py           # ğŸš¨ Global exception handlers
â”‚   â”œâ”€â”€ ğŸ“„ pagination.py           # ğŸ“„ Global pagination utilities
â”‚   â””â”€â”€ ğŸ“„ dependencies.py         # ğŸ”— Global dependencies
â”œâ”€â”€ ğŸ“ tests/                      # ğŸ§ª Test Suite
â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”œâ”€â”€ ğŸ“„ conftest.py
â”‚   â”œâ”€â”€ ğŸ“ auth/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_router.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_service.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ test_utils.py
â”‚   â”œâ”€â”€ ğŸ“ users/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_router.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ test_service.py
â”‚   â”œâ”€â”€ ğŸ“ posts/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_router.py
â”‚   â”‚   â””â”€â”€ ğŸ“„ test_service.py
â”‚   â””â”€â”€ ğŸ“ aws/
â”‚       â”œâ”€â”€ ğŸ“„ __init__.py
â”‚       â””â”€â”€ ğŸ“„ test_client.py
â”œâ”€â”€ ğŸ“ templates/                  # ğŸ¨ Jinja2 templates
â”‚   â”œâ”€â”€ ğŸ“„ base.html
â”‚   â”œâ”€â”€ ğŸ“„ index.html
â”‚   â””â”€â”€ ğŸ“„ login.html
â”œâ”€â”€ ğŸ“ static/                     # ğŸ­ Static files
â”‚   â”œâ”€â”€ ğŸ“ css/
â”‚   â”œâ”€â”€ ğŸ“ js/
â”‚   â””â”€â”€ ğŸ“ images/
â”œâ”€â”€ ğŸ“ requirements/               # ğŸ“¦ Dependencies
â”‚   â”œâ”€â”€ ğŸ“„ base.txt                # Base requirements
â”‚   â”œâ”€â”€ ğŸ“„ dev.txt                 # Development requirements
â”‚   â””â”€â”€ ğŸ“„ prod.txt                # Production requirements
â”œâ”€â”€ ğŸ“„ .env                        # ğŸ” Environment variables
â”œâ”€â”€ ğŸ“„ .env.example                # ğŸ“ Environment template
â”œâ”€â”€ ğŸ“„ .gitignore                  # ğŸš« Git ignore rules
â”œâ”€â”€ ğŸ“„ logging.ini                 # ğŸ“Š Logging configuration
â”œâ”€â”€ ğŸ“„ alembic.ini                 # ğŸ—„ï¸ Alembic configuration
â”œâ”€â”€ ğŸ“„ docker-compose.yml          # ğŸ³ Docker configuration
â”œâ”€â”€ ğŸ“„ Dockerfile                  # ğŸ³ Docker image definition
â””â”€â”€ ğŸ“„ README.md                   # ğŸ“– Project documentation
</div></code></pre>
<h2 id="%F0%9F%8F%97%EF%B8%8F-module-architecture">ğŸ—ï¸ Module Architecture</h2>
<p>Each module follows a consistent internal structure:</p>
<h3 id="%F0%9F%93%8A-module-component-breakdown">ğŸ“Š <strong>Module Component Breakdown</strong></h3>
<table>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
<th>Example Content</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>router.py</code></td>
<td>ğŸ›£ï¸ API endpoints and route definitions</td>
<td><code>@router.post(&quot;/login&quot;)</code></td>
</tr>
<tr>
<td><code>schemas.py</code></td>
<td>ğŸ“‹ Pydantic models for request/response</td>
<td><code>class UserCreate(BaseModel)</code></td>
</tr>
<tr>
<td><code>models.py</code></td>
<td>ğŸ—„ï¸ SQLAlchemy database models</td>
<td><code>class User(Base)</code></td>
</tr>
<tr>
<td><code>service.py</code></td>
<td>ğŸ’¼ Business logic and core functionality</td>
<td><code>def authenticate_user()</code></td>
</tr>
<tr>
<td><code>dependencies.py</code></td>
<td>ğŸ”— FastAPI dependencies and injections</td>
<td><code>def get_current_user()</code></td>
</tr>
<tr>
<td><code>config.py</code></td>
<td>âš™ï¸ Module-specific configurations</td>
<td><code>JWT_SECRET_KEY</code></td>
</tr>
<tr>
<td><code>constants.py</code></td>
<td>ğŸ“ Constants and error codes</td>
<td><code>MIN_PASSWORD_LENGTH = 8</code></td>
</tr>
<tr>
<td><code>exceptions.py</code></td>
<td>âš ï¸ Custom exception classes</td>
<td><code>class UserNotFound(HTTPException)</code></td>
</tr>
<tr>
<td><code>utils.py</code></td>
<td>ğŸ› ï¸ Helper and utility functions</td>
<td><code>def hash_password()</code></td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%93%9D-implementation-examples">ğŸ“ <strong>Implementation Examples</strong></h2>
<h3 id="%F0%9F%93%84-srcauthrouterpy"><strong>ğŸ“„ src/auth/router.py</strong></h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> APIRouter, Depends, HTTPException, status
<span class="hljs-keyword">from</span> sqlalchemy.orm <span class="hljs-keyword">import</span> Session
<span class="hljs-keyword">from</span> src.database <span class="hljs-keyword">import</span> get_db
<span class="hljs-keyword">from</span> src.auth <span class="hljs-keyword">import</span> service, schemas, dependencies

router = APIRouter(prefix=<span class="hljs-string">"/auth"</span>, tags=[<span class="hljs-string">"authentication"</span>])

<span class="hljs-meta">@router.post("/login", response_model=schemas.TokenResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">login</span><span class="hljs-params">(
    credentials: schemas.LoginRequest,
    db: Session = Depends<span class="hljs-params">(get_db)</span>
)</span>:</span>
    <span class="hljs-string">"""User login endpoint"""</span>
    user = <span class="hljs-keyword">await</span> service.authenticate_user(db, credentials.username, credentials.password)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user:
        <span class="hljs-keyword">raise</span> HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail=<span class="hljs-string">"Invalid credentials"</span>
        )
    
    token = service.create_access_token(user.id)
    <span class="hljs-keyword">return</span> schemas.TokenResponse(access_token=token, token_type=<span class="hljs-string">"bearer"</span>)

<span class="hljs-meta">@router.post("/register", response_model=schemas.UserResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">register</span><span class="hljs-params">(
    user_data: schemas.UserCreate,
    db: Session = Depends<span class="hljs-params">(get_db)</span>
)</span>:</span>
    <span class="hljs-string">"""User registration endpoint"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> service.create_user(db, user_data)

<span class="hljs-meta">@router.get("/me", response_model=schemas.UserResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_current_user_info</span><span class="hljs-params">(
    current_user = Depends<span class="hljs-params">(dependencies.get_current_user)</span>
)</span>:</span>
    <span class="hljs-string">"""Get current user information"""</span>
    <span class="hljs-keyword">return</span> current_user
</div></code></pre>
<h3 id="%F0%9F%93%84-srcauthservicepy"><strong>ğŸ“„ src/auth/service.py</strong></h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> sqlalchemy.orm <span class="hljs-keyword">import</span> Session
<span class="hljs-keyword">from</span> passlib.context <span class="hljs-keyword">import</span> CryptContext
<span class="hljs-keyword">from</span> jose <span class="hljs-keyword">import</span> jwt
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta
<span class="hljs-keyword">from</span> src.auth <span class="hljs-keyword">import</span> models, schemas, constants, exceptions
<span class="hljs-keyword">from</span> src.auth.config <span class="hljs-keyword">import</span> AUTH_CONFIG

pwd_context = CryptContext(schemes=[<span class="hljs-string">"bcrypt"</span>], deprecated=<span class="hljs-string">"auto"</span>)

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthService</span>:</span>
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">authenticate_user</span><span class="hljs-params">(db: Session, username: str, password: str)</span>:</span>
        <span class="hljs-string">"""Authenticate user with username and password"""</span>
        user = db.query(models.User).filter(
            models.User.username == username
        ).first()
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> pwd_context.verify(password, user.hashed_password):
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-keyword">return</span> user
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_access_token</span><span class="hljs-params">(user_id: int)</span> -&gt; str:</span>
        <span class="hljs-string">"""Create JWT access token"""</span>
        expire = datetime.utcnow() + timedelta(
            minutes=AUTH_CONFIG.ACCESS_TOKEN_EXPIRE_MINUTES
        )
        
        to_encode = {
            <span class="hljs-string">"sub"</span>: str(user_id),
            <span class="hljs-string">"exp"</span>: expire,
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"access"</span>
        }
        
        <span class="hljs-keyword">return</span> jwt.encode(
            to_encode, 
            AUTH_CONFIG.SECRET_KEY, 
            algorithm=AUTH_CONFIG.ALGORITHM
        )
    
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_user</span><span class="hljs-params">(db: Session, user_data: schemas.UserCreate)</span>:</span>
        <span class="hljs-string">"""Create new user account"""</span>
        <span class="hljs-comment"># Check if user exists</span>
        existing_user = db.query(models.User).filter(
            models.User.email == user_data.email
        ).first()
        
        <span class="hljs-keyword">if</span> existing_user:
            <span class="hljs-keyword">raise</span> exceptions.UserAlreadyExists(<span class="hljs-string">"User with this email already exists"</span>)
        
        <span class="hljs-comment"># Hash password</span>
        hashed_password = pwd_context.hash(user_data.password)
        
        <span class="hljs-comment"># Create user</span>
        db_user = models.User(
            username=user_data.username,
            email=user_data.email,
            hashed_password=hashed_password
        )
        
        db.add(db_user)
        db.commit()
        db.refresh(db_user)
        
        <span class="hljs-keyword">return</span> db_user
</div></code></pre>
<h3 id="%F0%9F%93%84-srcauthschemaspy"><strong>ğŸ“„ src/auth/schemas.py</strong></h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, EmailStr, validator
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Optional

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserBase</span><span class="hljs-params">(BaseModel)</span>:</span>
    username: str
    email: EmailStr

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserCreate</span><span class="hljs-params">(UserBase)</span>:</span>
    password: str
    
<span class="hljs-meta">    @validator('password')</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_password</span><span class="hljs-params">(cls, v)</span>:</span>
        <span class="hljs-keyword">if</span> len(v) &lt; <span class="hljs-number">8</span>:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">'Password must be at least 8 characters'</span>)
        <span class="hljs-keyword">return</span> v

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserResponse</span><span class="hljs-params">(UserBase)</span>:</span>
    id: int
    is_active: bool
    created_at: datetime
    
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Config</span>:</span>
        from_attributes = <span class="hljs-literal">True</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginRequest</span><span class="hljs-params">(BaseModel)</span>:</span>
    username: str
    password: str

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TokenResponse</span><span class="hljs-params">(BaseModel)</span>:</span>
    access_token: str
    token_type: str = <span class="hljs-string">"bearer"</span>
</div></code></pre>
<h3 id="%F0%9F%93%84-srcauthconstantspy"><strong>ğŸ“„ src/auth/constants.py</strong></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Authentication Constants</span>
MIN_PASSWORD_LENGTH = <span class="hljs-number">8</span>
MAX_PASSWORD_LENGTH = <span class="hljs-number">128</span>
USERNAME_MIN_LENGTH = <span class="hljs-number">3</span>
USERNAME_MAX_LENGTH = <span class="hljs-number">50</span>

<span class="hljs-comment"># Error Codes</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ErrorCodes</span>:</span>
    INVALID_CREDENTIALS = <span class="hljs-string">"AUTH_001"</span>
    USER_NOT_FOUND = <span class="hljs-string">"AUTH_002"</span>
    USER_ALREADY_EXISTS = <span class="hljs-string">"AUTH_003"</span>
    INVALID_TOKEN = <span class="hljs-string">"AUTH_004"</span>
    TOKEN_EXPIRED = <span class="hljs-string">"AUTH_005"</span>
    INSUFFICIENT_PERMISSIONS = <span class="hljs-string">"AUTH_006"</span>

<span class="hljs-comment"># Token Types</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TokenTypes</span>:</span>
    ACCESS = <span class="hljs-string">"access"</span>
    REFRESH = <span class="hljs-string">"refresh"</span>
    RESET_PASSWORD = <span class="hljs-string">"reset_password"</span>
</div></code></pre>
<h3 id="%F0%9F%93%84-srcauthexceptionspy"><strong>ğŸ“„ src/auth/exceptions.py</strong></h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> HTTPException, status
<span class="hljs-keyword">from</span> src.auth.constants <span class="hljs-keyword">import</span> ErrorCodes

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthException</span><span class="hljs-params">(HTTPException)</span>:</span>
    <span class="hljs-string">"""Base authentication exception"""</span>
    <span class="hljs-keyword">pass</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserNotFound</span><span class="hljs-params">(AuthException)</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, detail: str = <span class="hljs-string">"User not found"</span>)</span>:</span>
        super().__init__(
            status_code=status.HTTP_404_NOT_FOUND,
            detail=detail,
            headers={<span class="hljs-string">"error-code"</span>: ErrorCodes.USER_NOT_FOUND}
        )

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserAlreadyExists</span><span class="hljs-params">(AuthException)</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, detail: str = <span class="hljs-string">"User already exists"</span>)</span>:</span>
        super().__init__(
            status_code=status.HTTP_400_BAD_REQUEST,
            detail=detail,
            headers={<span class="hljs-string">"error-code"</span>: ErrorCodes.USER_ALREADY_EXISTS}
        )

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InvalidCredentials</span><span class="hljs-params">(AuthException)</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, detail: str = <span class="hljs-string">"Invalid credentials"</span>)</span>:</span>
        super().__init__(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail=detail,
            headers={<span class="hljs-string">"error-code"</span>: ErrorCodes.INVALID_CREDENTIALS}
        )

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InvalidToken</span><span class="hljs-params">(AuthException)</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, detail: str = <span class="hljs-string">"Invalid token"</span>)</span>:</span>
        super().__init__(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail=detail,
            headers={<span class="hljs-string">"error-code"</span>: ErrorCodes.INVALID_TOKEN}
        )
</div></code></pre>
<h2 id="%F0%9F%94%97-cross-module-imports">ğŸ”— <strong>Cross-Module Imports</strong></h2>
<p>When modules need to interact with each other, use explicit imports:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># âœ… Good: Explicit module imports</span>
<span class="hljs-keyword">from</span> src.auth <span class="hljs-keyword">import</span> constants <span class="hljs-keyword">as</span> auth_constants
<span class="hljs-keyword">from</span> src.notifications <span class="hljs-keyword">import</span> service <span class="hljs-keyword">as</span> notification_service
<span class="hljs-keyword">from</span> src.posts.constants <span class="hljs-keyword">import</span> ErrorCode <span class="hljs-keyword">as</span> PostErrorCode
<span class="hljs-keyword">from</span> src.users.models <span class="hljs-keyword">import</span> User

<span class="hljs-comment"># âŒ Avoid: Ambiguous imports</span>
<span class="hljs-keyword">from</span> constants <span class="hljs-keyword">import</span> ErrorCode  <span class="hljs-comment"># Which module's constants?</span>
<span class="hljs-keyword">from</span> service <span class="hljs-keyword">import</span> send_email   <span class="hljs-comment"># Which service?</span>
</div></code></pre>
<h3 id="%F0%9F%93%84-example-cross-module-usage"><strong>ğŸ“„ Example Cross-Module Usage</strong></h3>
<pre class="hljs"><code><div><span class="hljs-comment"># src/posts/service.py</span>
<span class="hljs-keyword">from</span> src.auth <span class="hljs-keyword">import</span> service <span class="hljs-keyword">as</span> auth_service
<span class="hljs-keyword">from</span> src.notifications <span class="hljs-keyword">import</span> service <span class="hljs-keyword">as</span> notification_service
<span class="hljs-keyword">from</span> src.users <span class="hljs-keyword">import</span> models <span class="hljs-keyword">as</span> user_models

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PostService</span>:</span>
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_post</span><span class="hljs-params">(db: Session, post_data: schemas.PostCreate, current_user)</span>:</span>
        <span class="hljs-comment"># Create the post</span>
        new_post = models.Post(**post_data.dict(), author_id=current_user.id)
        db.add(new_post)
        db.commit()
        
        <span class="hljs-comment"># Send notification to followers</span>
        followers = <span class="hljs-keyword">await</span> user_models.get_user_followers(db, current_user.id)
        <span class="hljs-keyword">await</span> notification_service.notify_new_post(followers, new_post)
        
        <span class="hljs-keyword">return</span> new_post
</div></code></pre>
<h2 id="%F0%9F%93%8A-project-configuration">ğŸ“Š <strong>Project Configuration</strong></h2>
<h3 id="%F0%9F%93%84-srcmainpy"><strong>ğŸ“„ src/main.py</strong></h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI
<span class="hljs-keyword">from</span> fastapi.middleware.cors <span class="hljs-keyword">import</span> CORSMiddleware
<span class="hljs-keyword">from</span> src.auth.router <span class="hljs-keyword">import</span> router <span class="hljs-keyword">as</span> auth_router
<span class="hljs-keyword">from</span> src.users.router <span class="hljs-keyword">import</span> router <span class="hljs-keyword">as</span> users_router
<span class="hljs-keyword">from</span> src.posts.router <span class="hljs-keyword">import</span> router <span class="hljs-keyword">as</span> posts_router
<span class="hljs-keyword">from</span> src.config <span class="hljs-keyword">import</span> settings

app = FastAPI(
    title=<span class="hljs-string">"Module-Based FastAPI Project"</span>,
    description=<span class="hljs-string">"FastAPI project organized by module functionality"</span>,
    version=<span class="hljs-string">"1.0.0"</span>
)

<span class="hljs-comment"># Middleware</span>
app.add_middleware(
    CORSMiddleware,
    allow_origins=settings.ALLOWED_HOSTS,
    allow_credentials=<span class="hljs-literal">True</span>,
    allow_methods=[<span class="hljs-string">"*"</span>],
    allow_headers=[<span class="hljs-string">"*"</span>],
)

<span class="hljs-comment"># Include routers</span>
app.include_router(auth_router)
app.include_router(users_router)
app.include_router(posts_router)

<span class="hljs-meta">@app.get("/")</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">root</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"message"</span>: <span class="hljs-string">"Welcome to Module-Based FastAPI Project"</span>}
</div></code></pre>
<h2 id="%F0%9F%8C%9F-advantages-of-module-functionality-structure">ğŸŒŸ <strong>Advantages of Module-Functionality Structure</strong></h2>
<h3 id="%E2%9C%85-benefits"><strong>âœ… Benefits:</strong></h3>
<table>
<thead>
<tr>
<th>Advantage</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ğŸ¯ <strong>Domain Cohesion</strong></td>
<td>All related code lives together</td>
</tr>
<tr>
<td>ğŸš€ <strong>Faster Development</strong></td>
<td>Easy to locate and modify features</td>
</tr>
<tr>
<td>ğŸ‘¥ <strong>Team Scalability</strong></td>
<td>Multiple developers can work on different modules</td>
</tr>
<tr>
<td>ğŸ”§ <strong>Easy Testing</strong></td>
<td>Module-specific test isolation</td>
</tr>
<tr>
<td>ğŸ“¦ <strong>Microservice Ready</strong></td>
<td>Easy to extract modules into separate services</td>
</tr>
<tr>
<td>ğŸ”„ <strong>Code Reusability</strong></td>
<td>Modules can be shared across projects</td>
</tr>
</tbody>
</table>
<h3 id="%E2%9A%A0%EF%B8%8F-considerations"><strong>âš ï¸ Considerations:</strong></h3>
<table>
<thead>
<tr>
<th>Challenge</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Code Duplication</strong></td>
<td>Use global utilities and shared modules</td>
</tr>
<tr>
<td><strong>Cross-Module Dependencies</strong></td>
<td>Use explicit imports and dependency injection</td>
</tr>
<tr>
<td><strong>Module Boundaries</strong></td>
<td>Clear domain separation and well-defined interfaces</td>
</tr>
</tbody>
</table>
<h2 id="%F0%9F%8E%AF-when-to-use-this-structure">ğŸ¯ <strong>When to Use This Structure</strong></h2>
<h3 id="%E2%9C%85-perfect-for"><strong>âœ… Perfect For:</strong></h3>
<ul>
<li>ğŸ¢ <strong>Large Applications</strong> with multiple business domains</li>
<li>ğŸ‘¥ <strong>Team Development</strong> with domain-specific teams</li>
<li>ğŸ”„ <strong>Microservice Migration</strong> planning</li>
<li>ğŸ“ˆ <strong>Scalable Applications</strong> that will grow significantly</li>
</ul>
<h3 id="%E2%9D%8C-might-be-overkill-for"><strong>âŒ Might Be Overkill For:</strong></h3>
<ul>
<li>ğŸ”¸ Simple APIs with few endpoints</li>
<li>ğŸ”¸ Prototypes or proof-of-concepts</li>
<li>ğŸ”¸ Single-developer projects</li>
<li>ğŸ”¸ Applications with minimal business logic</li>
</ul>
<h2 id="%F0%9F%9A%80-getting-started">ğŸš€ <strong>Getting Started</strong></h2>
<h3 id="1-create-module-template"><strong>1. Create Module Template</strong></h3>
<pre class="hljs"><code><div>mkdir -p src/{auth,users,posts}
<span class="hljs-keyword">for</span> module <span class="hljs-keyword">in</span> auth users posts; <span class="hljs-keyword">do</span>
    touch src/<span class="hljs-variable">$module</span>/{__init__.py,router.py,schemas.py,models.py,service.py,dependencies.py,config.py,constants.py,exceptions.py,utils.py}
<span class="hljs-keyword">done</span>
</div></code></pre>
<h3 id="2-set-up-dependencies"><strong>2. Set Up Dependencies</strong></h3>
<pre class="hljs"><code><div>pip install fastapi uvicorn sqlalchemy alembic psycopg2-binary
pip install python-jose[cryptography] passlib[bcrypt] python-multipart
</div></code></pre>
<h3 id="3-initialize-database"><strong>3. Initialize Database</strong></h3>
<pre class="hljs"><code><div>alembic init alembic
alembic revision --autogenerate -m <span class="hljs-string">"Initial migration"</span>
alembic upgrade head
</div></code></pre>
<hr>

</body>
</html>
