<!DOCTYPE html>
<html>
<head>
<title>12. Complete FastAPI Models Guide.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="complete-fastapi-models-guide-best-practices--user-management-system">Complete FastAPI Models Guide: Best Practices &amp; User Management System</h1>
<h2 id="%F0%9F%93%8B-table-of-contents">ğŸ“‹ Table of Contents</h2>
<ol>
<li><a href="#understanding-pydantic-basemodel">Understanding Pydantic BaseModel</a></li>
<li><a href="#model-architecture--inheritance">Model Architecture &amp; Inheritance</a></li>
<li><a href="#project-structure">Project Structure</a></li>
<li><a href="#core-model-types">Core Model Types</a></li>
<li><a href="#user-management-models">User Management Models</a></li>
<li><a href="#complete-implementation">Complete Implementation</a></li>
<li><a href="#best-practices">Best Practices</a></li>
</ol>
<h2 id="%F0%9F%8E%AF-understanding-pydantic-basemodel">ğŸ¯ Understanding Pydantic BaseModel</h2>
<h3 id="what-is-basemodel">What is BaseModel?</h3>
<p><code>BaseModel</code> is the foundation class from Pydantic that provides:</p>
<ul>
<li><strong>Data validation</strong> âœ…</li>
<li><strong>Serialization/Deserialization</strong> ğŸ”„</li>
<li><strong>Type checking</strong> ğŸ“</li>
<li><strong>Automatic documentation</strong> ğŸ“š</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExampleModel</span><span class="hljs-params">(BaseModel)</span>:</span>
    name: str
    age: int
    email: str
</div></code></pre>
<h3 id="when-to-inherit-from-basemodel">When to Inherit from BaseModel?</h3>
<p><strong>Always inherit from BaseModel when:</strong></p>
<ul>
<li>Creating request schemas (input validation)</li>
<li>Creating response schemas (output formatting)</li>
<li>Creating internal data models</li>
<li>Working with FastAPI route parameters</li>
</ul>
<h2 id="%F0%9F%8F%97%EF%B8%8F-model-architecture--inheritance">ğŸ—ï¸ Model Architecture &amp; Inheritance</h2>
<h3 id="the-3-layer-model-pattern">The 3-Layer Model Pattern</h3>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Request       â”‚â”€â”€â”€â–¶â”‚   Internal      â”‚â”€â”€â”€â–¶â”‚   Response      â”‚
â”‚   Models        â”‚    â”‚   Models        â”‚    â”‚   Models        â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ Validation    â”‚    â”‚ â€¢ DB Operations â”‚    â”‚ â€¢ API Output    â”‚
â”‚ â€¢ Input Schema  â”‚    â”‚ â€¢ Full Data     â”‚    â”‚ â€¢ Safe Data     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h2 id="%F0%9F%93%81-project-structure">ğŸ“ Project Structure</h2>
<pre class="hljs"><code><div>app/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base.py              # Base models
â”‚   â”œâ”€â”€ request/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth.py          # Auth request models
â”‚   â”‚   â””â”€â”€ user.py          # User request models
â”‚   â”œâ”€â”€ response/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth.py          # Auth response models
â”‚   â”‚   â””â”€â”€ user.py          # User response models
â”‚   â””â”€â”€ internal/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ user.py          # Internal user models
â”œâ”€â”€ routers/
â”‚   â”œâ”€â”€ auth.py
â”‚   â””â”€â”€ user.py
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ auth.py
â”‚   â””â”€â”€ user.py
â””â”€â”€ main.py
</div></code></pre>
<h2 id="%F0%9F%A7%B1-core-model-types">ğŸ§± Core Model Types</h2>
<h3 id="1-base-models">1. Base Models</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># models/base.py</span>
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Optional
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field
<span class="hljs-keyword">from</span> bson <span class="hljs-keyword">import</span> ObjectId

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PyObjectId</span><span class="hljs-params">(ObjectId)</span>:</span>
<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__get_validators__</span><span class="hljs-params">(cls)</span>:</span>
        <span class="hljs-keyword">yield</span> cls.validate

<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate</span><span class="hljs-params">(cls, v)</span>:</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ObjectId.is_valid(v):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"Invalid objectid"</span>)
        <span class="hljs-keyword">return</span> ObjectId(v)

<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__modify_schema__</span><span class="hljs-params">(cls, field_schema)</span>:</span>
        field_schema.update(type=<span class="hljs-string">"string"</span>)

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseDBModel</span><span class="hljs-params">(BaseModel)</span>:</span>
    <span class="hljs-string">"""Base model for database entities"""</span>
    id: Optional[PyObjectId] = Field(default_factory=PyObjectId, alias=<span class="hljs-string">"_id"</span>)
    created_at: datetime = Field(default_factory=datetime.utcnow)
    updated_at: datetime = Field(default_factory=datetime.utcnow)
    
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Config</span>:</span>
        allow_population_by_field_name = <span class="hljs-literal">True</span>
        arbitrary_types_allowed = <span class="hljs-literal">True</span>
        json_encoders = {ObjectId: str}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseResponse</span><span class="hljs-params">(BaseModel)</span>:</span>
    <span class="hljs-string">"""Base response model"""</span>
    success: bool = <span class="hljs-literal">True</span>
    message: str = <span class="hljs-string">"Operation successful"</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ErrorResponse</span><span class="hljs-params">(BaseModel)</span>:</span>
    <span class="hljs-string">"""Error response model"""</span>
    success: bool = <span class="hljs-literal">False</span>
    message: str
    error_code: Optional[str] = <span class="hljs-literal">None</span>
</div></code></pre>
<h3 id="2-request-models">2. Request Models</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># models/request/auth.py</span>
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, EmailStr, Field, validator
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Optional
<span class="hljs-keyword">import</span> re

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RegisterUserRequest</span><span class="hljs-params">(BaseModel)</span>:</span>
    username: str = Field(..., min_length=<span class="hljs-number">3</span>, max_length=<span class="hljs-number">20</span>)
    email: EmailStr
    password: str = Field(..., min_length=<span class="hljs-number">8</span>)
    full_name: str = Field(..., min_length=<span class="hljs-number">2</span>, max_length=<span class="hljs-number">50</span>)
    
<span class="hljs-meta">    @validator('username')</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_username</span><span class="hljs-params">(cls, v)</span>:</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> re.match(<span class="hljs-string">r'^[a-zA-Z0-9_]+$'</span>, v):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">'Username can only contain letters, numbers, and underscores'</span>)
        <span class="hljs-keyword">return</span> v
    
<span class="hljs-meta">    @validator('password')</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_password</span><span class="hljs-params">(cls, v)</span>:</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> re.search(<span class="hljs-string">r'[A-Z]'</span>, v):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">'Password must contain at least one uppercase letter'</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> re.search(<span class="hljs-string">r'[a-z]'</span>, v):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">'Password must contain at least one lowercase letter'</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> re.search(<span class="hljs-string">r'\d'</span>, v):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">'Password must contain at least one digit'</span>)
        <span class="hljs-keyword">return</span> v

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginUserRequest</span><span class="hljs-params">(BaseModel)</span>:</span>
    email: EmailStr
    password: str

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RefreshTokenRequest</span><span class="hljs-params">(BaseModel)</span>:</span>
    refresh_token: str

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChangePasswordRequest</span><span class="hljs-params">(BaseModel)</span>:</span>
    current_password: str
    new_password: str = Field(..., min_length=<span class="hljs-number">8</span>)
    
<span class="hljs-meta">    @validator('new_password')</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_new_password</span><span class="hljs-params">(cls, v)</span>:</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> re.search(<span class="hljs-string">r'[A-Z]'</span>, v):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">'Password must contain at least one uppercase letter'</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> re.search(<span class="hljs-string">r'[a-z]'</span>, v):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">'Password must contain at least one lowercase letter'</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> re.search(<span class="hljs-string">r'\d'</span>, v):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">'Password must contain at least one digit'</span>)
        <span class="hljs-keyword">return</span> v
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># models/request/user.py</span>
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Optional

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UpdateAccountDetailsRequest</span><span class="hljs-params">(BaseModel)</span>:</span>
    full_name: Optional[str] = Field(<span class="hljs-literal">None</span>, min_length=<span class="hljs-number">2</span>, max_length=<span class="hljs-number">50</span>)
    bio: Optional[str] = Field(<span class="hljs-literal">None</span>, max_length=<span class="hljs-number">500</span>)
    location: Optional[str] = Field(<span class="hljs-literal">None</span>, max_length=<span class="hljs-number">100</span>)
    website: Optional[str] = Field(<span class="hljs-literal">None</span>, max_length=<span class="hljs-number">200</span>)

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UpdateUserAvatarRequest</span><span class="hljs-params">(BaseModel)</span>:</span>
    avatar_url: str = Field(..., description=<span class="hljs-string">"URL of the uploaded avatar image"</span>)

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UpdateUserCoverImageRequest</span><span class="hljs-params">(BaseModel)</span>:</span>
    cover_image_url: str = Field(..., description=<span class="hljs-string">"URL of the uploaded cover image"</span>)
</div></code></pre>
<h3 id="3-internal-models">3. Internal Models</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># models/internal/user.py</span>
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Optional, List, Dict, Any
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> EmailStr, Field
<span class="hljs-keyword">from</span> models.base <span class="hljs-keyword">import</span> BaseDBModel

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserInDB</span><span class="hljs-params">(BaseDBModel)</span>:</span>
    <span class="hljs-string">"""Complete user model for database operations"""</span>
    username: str = Field(..., unique=<span class="hljs-literal">True</span>, index=<span class="hljs-literal">True</span>)
    email: EmailStr = Field(..., unique=<span class="hljs-literal">True</span>, index=<span class="hljs-literal">True</span>)
    hashed_password: str
    full_name: str
    is_active: bool = <span class="hljs-literal">True</span>
    is_verified: bool = <span class="hljs-literal">False</span>
    is_superuser: bool = <span class="hljs-literal">False</span>
    
    <span class="hljs-comment"># Profile information</span>
    bio: Optional[str] = <span class="hljs-literal">None</span>
    location: Optional[str] = <span class="hljs-literal">None</span>
    website: Optional[str] = <span class="hljs-literal">None</span>
    avatar_url: Optional[str] = <span class="hljs-literal">None</span>
    cover_image_url: Optional[str] = <span class="hljs-literal">None</span>
    
    <span class="hljs-comment"># Timestamps</span>
    last_login: Optional[datetime] = <span class="hljs-literal">None</span>
    email_verified_at: Optional[datetime] = <span class="hljs-literal">None</span>
    
    <span class="hljs-comment"># Settings</span>
    preferences: Dict[str, Any] = Field(default_factory=dict)
    privacy_settings: Dict[str, bool] = Field(default_factory=<span class="hljs-keyword">lambda</span>: {
        <span class="hljs-string">"show_email"</span>: <span class="hljs-literal">False</span>,
        <span class="hljs-string">"show_location"</span>: <span class="hljs-literal">True</span>,
        <span class="hljs-string">"show_website"</span>: <span class="hljs-literal">True</span>
    })
    
    <span class="hljs-comment"># Social features</span>
    followers_count: int = <span class="hljs-number">0</span>
    following_count: int = <span class="hljs-number">0</span>
    posts_count: int = <span class="hljs-number">0</span>
    
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Config</span>:</span>
        collection_name = <span class="hljs-string">"users"</span>
        schema_extra = {
            <span class="hljs-string">"example"</span>: {
                <span class="hljs-string">"username"</span>: <span class="hljs-string">"johndoe"</span>,
                <span class="hljs-string">"email"</span>: <span class="hljs-string">"john@example.com"</span>,
                <span class="hljs-string">"full_name"</span>: <span class="hljs-string">"John Doe"</span>,
                <span class="hljs-string">"bio"</span>: <span class="hljs-string">"Software developer passionate about Python"</span>,
                <span class="hljs-string">"location"</span>: <span class="hljs-string">"San Francisco, CA"</span>
            }
        }

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserSession</span><span class="hljs-params">(BaseDBModel)</span>:</span>
    <span class="hljs-string">"""User session model for managing authentication"""</span>
    user_id: str
    access_token: str
    refresh_token: str
    device_info: Optional[str] = <span class="hljs-literal">None</span>
    ip_address: Optional[str] = <span class="hljs-literal">None</span>
    expires_at: datetime
    is_active: bool = <span class="hljs-literal">True</span>
    
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Config</span>:</span>
        collection_name = <span class="hljs-string">"user_sessions"</span>
</div></code></pre>
<h3 id="4-response-models">4. Response Models</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># models/response/auth.py</span>
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Optional
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> EmailStr
<span class="hljs-keyword">from</span> models.base <span class="hljs-keyword">import</span> BaseResponse

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TokenResponse</span><span class="hljs-params">(BaseResponse)</span>:</span>
    access_token: str
    refresh_token: str
    token_type: str = <span class="hljs-string">"bearer"</span>
    expires_in: int  <span class="hljs-comment"># seconds</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginResponse</span><span class="hljs-params">(TokenResponse)</span>:</span>
    user: <span class="hljs-string">"UserResponse"</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RegisterResponse</span><span class="hljs-params">(BaseResponse)</span>:</span>
    user: <span class="hljs-string">"UserResponse"</span>
    message: str = <span class="hljs-string">"User registered successfully"</span>

<span class="hljs-comment"># Forward reference resolution</span>
<span class="hljs-keyword">from</span> models.response.user <span class="hljs-keyword">import</span> UserResponse
LoginResponse.update_forward_refs()
RegisterResponse.update_forward_refs()
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># models/response/user.py</span>
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Optional, Dict, Any
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, EmailStr
<span class="hljs-keyword">from</span> models.base <span class="hljs-keyword">import</span> BaseResponse

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserResponse</span><span class="hljs-params">(BaseModel)</span>:</span>
    <span class="hljs-string">"""Public user information"""</span>
    id: str
    username: str
    email: EmailStr
    full_name: str
    bio: Optional[str] = <span class="hljs-literal">None</span>
    location: Optional[str] = <span class="hljs-literal">None</span>
    website: Optional[str] = <span class="hljs-literal">None</span>
    avatar_url: Optional[str] = <span class="hljs-literal">None</span>
    cover_image_url: Optional[str] = <span class="hljs-literal">None</span>
    is_verified: bool
    followers_count: int = <span class="hljs-number">0</span>
    following_count: int = <span class="hljs-number">0</span>
    posts_count: int = <span class="hljs-number">0</span>
    created_at: datetime
    last_login: Optional[datetime] = <span class="hljs-literal">None</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CurrentUserResponse</span><span class="hljs-params">(UserResponse)</span>:</span>
    <span class="hljs-string">"""Extended user info for the authenticated user"""</span>
    email_verified_at: Optional[datetime] = <span class="hljs-literal">None</span>
    preferences: Dict[str, Any] = {}
    privacy_settings: Dict[str, bool] = {}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UpdateUserResponse</span><span class="hljs-params">(BaseResponse)</span>:</span>
    user: UserResponse
    message: str = <span class="hljs-string">"User updated successfully"</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserListResponse</span><span class="hljs-params">(BaseResponse)</span>:</span>
    users: list[UserResponse]
    total: int
    page: int
    limit: int
</div></code></pre>
<h2 id="%F0%9F%94%90-complete-user-management-implementation">ğŸ” Complete User Management Implementation</h2>
<h3 id="authentication-service">Authentication Service</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># services/auth.py</span>
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Optional
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> HTTPException, status
<span class="hljs-keyword">from</span> passlib.context <span class="hljs-keyword">import</span> CryptContext
<span class="hljs-keyword">from</span> jose <span class="hljs-keyword">import</span> JWTError, jwt
<span class="hljs-keyword">from</span> models.internal.user <span class="hljs-keyword">import</span> UserInDB, UserSession
<span class="hljs-keyword">from</span> models.request.auth <span class="hljs-keyword">import</span> RegisterUserRequest, LoginUserRequest

pwd_context = CryptContext(schemes=[<span class="hljs-string">"bcrypt"</span>], deprecated=<span class="hljs-string">"auto"</span>)

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthService</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, secret_key: str, algorithm: str = <span class="hljs-string">"HS256"</span>)</span>:</span>
        self.secret_key = secret_key
        self.algorithm = algorithm
        self.access_token_expire_minutes = <span class="hljs-number">30</span>
        self.refresh_token_expire_days = <span class="hljs-number">7</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">verify_password</span><span class="hljs-params">(self, plain_password: str, hashed_password: str)</span> -&gt; bool:</span>
        <span class="hljs-keyword">return</span> pwd_context.verify(plain_password, hashed_password)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_password_hash</span><span class="hljs-params">(self, password: str)</span> -&gt; str:</span>
        <span class="hljs-keyword">return</span> pwd_context.hash(password)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_access_token</span><span class="hljs-params">(self, data: dict)</span> -&gt; str:</span>
        to_encode = data.copy()
        expire = datetime.utcnow() + timedelta(minutes=self.access_token_expire_minutes)
        to_encode.update({<span class="hljs-string">"exp"</span>: expire, <span class="hljs-string">"type"</span>: <span class="hljs-string">"access"</span>})
        <span class="hljs-keyword">return</span> jwt.encode(to_encode, self.secret_key, algorithm=self.algorithm)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_refresh_token</span><span class="hljs-params">(self, data: dict)</span> -&gt; str:</span>
        to_encode = data.copy()
        expire = datetime.utcnow() + timedelta(days=self.refresh_token_expire_days)
        to_encode.update({<span class="hljs-string">"exp"</span>: expire, <span class="hljs-string">"type"</span>: <span class="hljs-string">"refresh"</span>})
        <span class="hljs-keyword">return</span> jwt.encode(to_encode, self.secret_key, algorithm=self.algorithm)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">verify_token</span><span class="hljs-params">(self, token: str, token_type: str = <span class="hljs-string">"access"</span>)</span> -&gt; dict:</span>
        <span class="hljs-keyword">try</span>:
            payload = jwt.decode(token, self.secret_key, algorithms=[self.algorithm])
            <span class="hljs-keyword">if</span> payload.get(<span class="hljs-string">"type"</span>) != token_type:
                <span class="hljs-keyword">raise</span> HTTPException(
                    status_code=status.HTTP_401_UNAUTHORIZED,
                    detail=<span class="hljs-string">"Invalid token type"</span>
                )
            <span class="hljs-keyword">return</span> payload
        <span class="hljs-keyword">except</span> JWTError:
            <span class="hljs-keyword">raise</span> HTTPException(
                status_code=status.HTTP_401_UNAUTHORIZED,
                detail=<span class="hljs-string">"Could not validate credentials"</span>
            )

    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">register_user</span><span class="hljs-params">(self, user_data: RegisterUserRequest)</span> -&gt; UserInDB:</span>
        <span class="hljs-comment"># Check if user exists</span>
        existing_user = <span class="hljs-keyword">await</span> self.get_user_by_email(user_data.email)
        <span class="hljs-keyword">if</span> existing_user:
            <span class="hljs-keyword">raise</span> HTTPException(
                status_code=status.HTTP_400_BAD_REQUEST,
                detail=<span class="hljs-string">"Email already registered"</span>
            )
        
        existing_username = <span class="hljs-keyword">await</span> self.get_user_by_username(user_data.username)
        <span class="hljs-keyword">if</span> existing_username:
            <span class="hljs-keyword">raise</span> HTTPException(
                status_code=status.HTTP_400_BAD_REQUEST,
                detail=<span class="hljs-string">"Username already taken"</span>
            )

        <span class="hljs-comment"># Create new user</span>
        hashed_password = self.get_password_hash(user_data.password)
        user = UserInDB(
            username=user_data.username,
            email=user_data.email,
            hashed_password=hashed_password,
            full_name=user_data.full_name
        )
        
        <span class="hljs-comment"># Save to database (implement based on your DB choice)</span>
        saved_user = <span class="hljs-keyword">await</span> self.save_user(user)
        <span class="hljs-keyword">return</span> saved_user

    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">authenticate_user</span><span class="hljs-params">(self, email: str, password: str)</span> -&gt; Optional[UserInDB]:</span>
        user = <span class="hljs-keyword">await</span> self.get_user_by_email(email)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> self.verify_password(password, user.hashed_password):
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        
        <span class="hljs-comment"># Update last login</span>
        user.last_login = datetime.utcnow()
        <span class="hljs-keyword">await</span> self.update_user(user)
        <span class="hljs-keyword">return</span> user
</div></code></pre>
<h3 id="user-routes">User Routes</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># routers/auth.py</span>
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> APIRouter, Depends, HTTPException, status
<span class="hljs-keyword">from</span> fastapi.security <span class="hljs-keyword">import</span> HTTPBearer
<span class="hljs-keyword">from</span> models.request.auth <span class="hljs-keyword">import</span> (
    RegisterUserRequest, 
    LoginUserRequest, 
    RefreshTokenRequest,
    ChangePasswordRequest
)
<span class="hljs-keyword">from</span> models.response.auth <span class="hljs-keyword">import</span> LoginResponse, RegisterResponse, TokenResponse
<span class="hljs-keyword">from</span> models.response.user <span class="hljs-keyword">import</span> CurrentUserResponse
<span class="hljs-keyword">from</span> services.auth <span class="hljs-keyword">import</span> AuthService

router = APIRouter(prefix=<span class="hljs-string">"/auth"</span>, tags=[<span class="hljs-string">"Authentication"</span>])
security = HTTPBearer()

<span class="hljs-meta">@router.post("/register", response_model=RegisterResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">register_user</span><span class="hljs-params">(user_data: RegisterUserRequest)</span>:</span>
    <span class="hljs-string">"""Register a new user"""</span>
    auth_service = AuthService(secret_key=<span class="hljs-string">"your-secret-key"</span>)
    user = <span class="hljs-keyword">await</span> auth_service.register_user(user_data)
    
    <span class="hljs-keyword">return</span> RegisterResponse(
        user=UserResponse.from_orm(user),
        message=<span class="hljs-string">"User registered successfully"</span>
    )

<span class="hljs-meta">@router.post("/login", response_model=LoginResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">login_user</span><span class="hljs-params">(credentials: LoginUserRequest)</span>:</span>
    <span class="hljs-string">"""Authenticate user and return tokens"""</span>
    auth_service = AuthService(secret_key=<span class="hljs-string">"your-secret-key"</span>)
    user = <span class="hljs-keyword">await</span> auth_service.authenticate_user(
        credentials.email, 
        credentials.password
    )
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user:
        <span class="hljs-keyword">raise</span> HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail=<span class="hljs-string">"Incorrect email or password"</span>
        )
    
    access_token = auth_service.create_access_token(
        data={<span class="hljs-string">"sub"</span>: str(user.id), <span class="hljs-string">"email"</span>: user.email}
    )
    refresh_token = auth_service.create_refresh_token(
        data={<span class="hljs-string">"sub"</span>: str(user.id)}
    )
    
    <span class="hljs-keyword">return</span> LoginResponse(
        access_token=access_token,
        refresh_token=refresh_token,
        expires_in=<span class="hljs-number">1800</span>,  <span class="hljs-comment"># 30 minutes</span>
        user=UserResponse.from_orm(user)
    )

<span class="hljs-meta">@router.post("/logout")</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">logout_user</span><span class="hljs-params">(token: str = Depends<span class="hljs-params">(security)</span>)</span>:</span>
    <span class="hljs-string">"""Logout user and invalidate tokens"""</span>
    <span class="hljs-comment"># Implement token blacklisting logic</span>
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"message"</span>: <span class="hljs-string">"Successfully logged out"</span>}

<span class="hljs-meta">@router.post("/refresh", response_model=TokenResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">refresh_access_token</span><span class="hljs-params">(refresh_data: RefreshTokenRequest)</span>:</span>
    <span class="hljs-string">"""Refresh access token using refresh token"""</span>
    auth_service = AuthService(secret_key=<span class="hljs-string">"your-secret-key"</span>)
    payload = auth_service.verify_token(refresh_data.refresh_token, <span class="hljs-string">"refresh"</span>)
    
    new_access_token = auth_service.create_access_token(
        data={<span class="hljs-string">"sub"</span>: payload[<span class="hljs-string">"sub"</span>]}
    )
    
    <span class="hljs-keyword">return</span> TokenResponse(
        access_token=new_access_token,
        refresh_token=refresh_data.refresh_token,
        expires_in=<span class="hljs-number">1800</span>
    )

<span class="hljs-meta">@router.put("/change-password")</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change_current_password</span><span class="hljs-params">(
    password_data: ChangePasswordRequest,
    current_user: UserInDB = Depends<span class="hljs-params">(get_current_user)</span>
)</span>:</span>
    <span class="hljs-string">"""Change user's password"""</span>
    auth_service = AuthService(secret_key=<span class="hljs-string">"your-secret-key"</span>)
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> auth_service.verify_password(
        password_data.current_password, 
        current_user.hashed_password
    ):
        <span class="hljs-keyword">raise</span> HTTPException(
            status_code=status.HTTP_400_BAD_REQUEST,
            detail=<span class="hljs-string">"Incorrect current password"</span>
        )
    
    current_user.hashed_password = auth_service.get_password_hash(
        password_data.new_password
    )
    <span class="hljs-keyword">await</span> auth_service.update_user(current_user)
    
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"message"</span>: <span class="hljs-string">"Password changed successfully"</span>}

<span class="hljs-meta">@router.get("/me", response_model=CurrentUserResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_current_user</span><span class="hljs-params">(current_user: UserInDB = Depends<span class="hljs-params">(get_current_user)</span>)</span>:</span>
    <span class="hljs-string">"""Get current user information"""</span>
    <span class="hljs-keyword">return</span> CurrentUserResponse.from_orm(current_user)
</div></code></pre>
<h3 id="user-management-routes">User Management Routes</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># routers/user.py</span>
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> APIRouter, Depends, UploadFile, File
<span class="hljs-keyword">from</span> models.request.user <span class="hljs-keyword">import</span> (
    UpdateAccountDetailsRequest,
    UpdateUserAvatarRequest,
    UpdateUserCoverImageRequest
)
<span class="hljs-keyword">from</span> models.response.user <span class="hljs-keyword">import</span> UpdateUserResponse, CurrentUserResponse
<span class="hljs-keyword">from</span> models.internal.user <span class="hljs-keyword">import</span> UserInDB

router = APIRouter(prefix=<span class="hljs-string">"/user"</span>, tags=[<span class="hljs-string">"User Management"</span>])

<span class="hljs-meta">@router.put("/update-account", response_model=UpdateUserResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update_account_details</span><span class="hljs-params">(
    update_data: UpdateAccountDetailsRequest,
    current_user: UserInDB = Depends<span class="hljs-params">(get_current_user)</span>
)</span>:</span>
    <span class="hljs-string">"""Update user account details"""</span>
    update_dict = update_data.dict(exclude_unset=<span class="hljs-literal">True</span>)
    
    <span class="hljs-keyword">for</span> field, value <span class="hljs-keyword">in</span> update_dict.items():
        setattr(current_user, field, value)
    
    current_user.updated_at = datetime.utcnow()
    updated_user = <span class="hljs-keyword">await</span> update_user_in_db(current_user)
    
    <span class="hljs-keyword">return</span> UpdateUserResponse(
        user=UserResponse.from_orm(updated_user),
        message=<span class="hljs-string">"Account details updated successfully"</span>
    )

<span class="hljs-meta">@router.put("/update-avatar", response_model=UpdateUserResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update_user_avatar</span><span class="hljs-params">(
    avatar_data: UpdateUserAvatarRequest,
    current_user: UserInDB = Depends<span class="hljs-params">(get_current_user)</span>
)</span>:</span>
    <span class="hljs-string">"""Update user avatar"""</span>
    current_user.avatar_url = avatar_data.avatar_url
    current_user.updated_at = datetime.utcnow()
    
    updated_user = <span class="hljs-keyword">await</span> update_user_in_db(current_user)
    
    <span class="hljs-keyword">return</span> UpdateUserResponse(
        user=UserResponse.from_orm(updated_user),
        message=<span class="hljs-string">"Avatar updated successfully"</span>
    )

<span class="hljs-meta">@router.put("/update-cover", response_model=UpdateUserResponse)</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update_user_cover_image</span><span class="hljs-params">(
    cover_data: UpdateUserCoverImageRequest,
    current_user: UserInDB = Depends<span class="hljs-params">(get_current_user)</span>
)</span>:</span>
    <span class="hljs-string">"""Update user cover image"""</span>
    current_user.cover_image_url = cover_data.cover_image_url
    current_user.updated_at = datetime.utcnow()
    
    updated_user = <span class="hljs-keyword">await</span> update_user_in_db(current_user)
    
    <span class="hljs-keyword">return</span> UpdateUserResponse(
        user=UserResponse.from_orm(updated_user),
        message=<span class="hljs-string">"Cover image updated successfully"</span>
    )
</div></code></pre>
<h2 id="%F0%9F%8E%AF-best-practices">ğŸ¯ Best Practices</h2>
<h3 id="1-model-validation">1. Model Validation</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> validator, root_validator

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserModel</span><span class="hljs-params">(BaseModel)</span>:</span>
    email: EmailStr
    age: int
    
<span class="hljs-meta">    @validator('age')</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_age</span><span class="hljs-params">(cls, v)</span>:</span>
        <span class="hljs-keyword">if</span> v &lt; <span class="hljs-number">13</span>:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">'User must be at least 13 years old'</span>)
        <span class="hljs-keyword">return</span> v
    
<span class="hljs-meta">    @root_validator</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_model</span><span class="hljs-params">(cls, values)</span>:</span>
        <span class="hljs-comment"># Cross-field validation</span>
        <span class="hljs-keyword">return</span> values
</div></code></pre>
<h3 id="2-field-configuration">2. Field Configuration</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> Field

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserModel</span><span class="hljs-params">(BaseModel)</span>:</span>
    username: str = Field(
        ..., 
        min_length=<span class="hljs-number">3</span>, 
        max_length=<span class="hljs-number">20</span>,
        regex=<span class="hljs-string">r'^[a-zA-Z0-9_]+$'</span>,
        description=<span class="hljs-string">"Unique username"</span>,
        example=<span class="hljs-string">"johndoe"</span>
    )
</div></code></pre>
<h3 id="3-model-configuration">3. Model Configuration</h3>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserModel</span><span class="hljs-params">(BaseModel)</span>:</span>
    name: str
    
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Config</span>:</span>
        <span class="hljs-comment"># Allow field aliases</span>
        allow_population_by_field_name = <span class="hljs-literal">True</span>
        <span class="hljs-comment"># Validate on assignment</span>
        validate_assignment = <span class="hljs-literal">True</span>
        <span class="hljs-comment"># Use enum values</span>
        use_enum_values = <span class="hljs-literal">True</span>
        <span class="hljs-comment"># JSON schema extra</span>
        schema_extra = {
            <span class="hljs-string">"example"</span>: {
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"John Doe"</span>
            }
        }
</div></code></pre>
<h3 id="4-error-handling">4. Error Handling</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> HTTPException, status
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> ValidationError

<span class="hljs-keyword">try</span>:
    user = UserModel(**data)
<span class="hljs-keyword">except</span> ValidationError <span class="hljs-keyword">as</span> e:
    <span class="hljs-keyword">raise</span> HTTPException(
        status_code=status.HTTP_422_UNPROCESSABLE_ENTITY,
        detail=e.errors()
    )
</div></code></pre>
<h2 id="%F0%9F%9A%80-key-takeaways">ğŸš€ Key Takeaways</h2>
<ol>
<li><strong>Always inherit from BaseModel</strong> for FastAPI integration</li>
<li><strong>Use 3-layer model architecture</strong> for clean separation</li>
<li><strong>Implement proper validation</strong> at the Pydantic level</li>
<li><strong>Never expose sensitive data</strong> in response models</li>
<li><strong>Use proper field configuration</strong> for better documentation</li>
<li><strong>Implement consistent error handling</strong> across models</li>
<li><strong>Structure your project</strong> for scalability and maintainability</li>
</ol>
<p>This comprehensive guide provides a solid foundation for building robust FastAPI applications with proper model management and user authentication systems.</p>

</body>
</html>
