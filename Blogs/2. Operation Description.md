# ğŸŒŸ FastAPI Metadata

## ğŸ¯ Overview

FastAPI provides powerful built-in documentation features that automatically generate interactive API documentation. This comprehensive guide covers how to enhance your API documentation with metadata, custom descriptions, status codes, tags, and advanced features that make your API professional and developer-friendly.

## ğŸ“š **Part 1: Understanding FastAPI Documentation System**

### ğŸ”§ **How FastAPI Documentation Works**

````python
from fastapi import FastAPI, status, HTTPException, Query, Path, Body
from fastapi.responses import JSONResponse
from typing import Optional, List, Dict, Any
from pydantic import BaseModel, Field
from enum import Enum
import uvicorn

# ğŸ¨ Create FastAPI app with comprehensive metadata
app = FastAPI(
    title="ğŸš€ Advanced API Documentation Demo",
    description="""
    ## ğŸŒŸ Welcome to Advanced FastAPI Documentation!
    
    This API demonstrates comprehensive documentation features including:
    
    * ğŸ“ **Rich Descriptions**: Markdown-formatted endpoint descriptions
    * ğŸ·ï¸ **Organized Tags**: Grouped endpoints for better navigation
    * âœ… **Status Codes**: Proper HTTP status code handling
    * ğŸ“Š **Response Models**: Structured response documentation
    * ğŸ›¡ï¸ **Error Handling**: Comprehensive error response documentation
    
    ### ğŸ”— Quick Links
    - ğŸ“š [API Documentation](/docs)
    - ğŸ“‹ [ReDoc Documentation](/redoc) 
    - ğŸ”§ [OpenAPI Schema](/openapi.json)
    """,
    version="2.0.0",
    terms_of_service="https://example.com/terms/",
    contact={
        "name": "API Support Team",
        "url": "https://example.com/contact/",
        "email": "support@example.com",
    },
    license_info={
        "name": "MIT License",
        "url": "https://opensource.org/licenses/MIT",
    },
    # ğŸ·ï¸ Global tag definitions for better organization
    openapi_tags=[
        {
            "name": "ğŸ‘¤ Users",
            "description": "**User management operations**. Handle user creation, authentication, and profile management.",
            "externalDocs": {
                "description": "User Management Guide",
                "url": "https://example.com/docs/users/",
            },
        },
        {
            "name": "ğŸ“¦ Products", 
            "description": "**Product catalog operations**. Manage products, categories, and inventory.",
        },
        {
            "name": "ğŸ›’ Orders",
            "description": "**Order processing**. Handle order creation, payment, and fulfillment.",
        },
        {
            "name": "ğŸ”§ System",
            "description": "**System utilities**. Health checks, monitoring, and administrative functions.",
        },
    ]
)
````


## ğŸ“ **Part 2: Operation Descriptions \& Metadata**

### ğŸ¯ **Basic Metadata Enhancement**

````python
# ğŸ“¦ Pydantic models for structured responses
class User(BaseModel):
    """ğŸ‘¤ User model with comprehensive validation"""
    id: int = Field(..., description="ğŸ†” Unique user identifier", example=123)
    username: str = Field(..., min_length=3, max_length=50, description="ğŸ‘¤ Unique username", example="john_doe")
    email: str = Field(..., description="ğŸ“§ User email address", example="john@example.com")
    full_name: Optional[str] = Field(None, description="ğŸ‘¨â€ğŸ’¼ User's full name", example="John Doe")
    is_active: bool = Field(True, description="âœ… Whether the user account is active")
    created_at: str = Field(..., description="ğŸ“… Account creation timestamp", example="2024-01-01T00:00:00Z")

class UserCreate(BaseModel):
    """ğŸ“ User creation model"""
    username: str = Field(..., min_length=3, max_length=50, example="new_user")
    email: str = Field(..., example="newuser@example.com")
    password: str = Field(..., min_length=8, example="secure_password123")
    full_name: Optional[str] = Field(None, example="New User")

class APIResponse(BaseModel):
    """ğŸ“Š Standardized API response wrapper"""
    status: str = Field(..., description="ğŸ”„ Response status", example="success")
    message: str = Field(..., description="ğŸ“ Human-readable message", example="Operation completed successfully")
    data: Optional[Any] = Field(None, description="ğŸ“Š Response data")
    meta: Optional[Dict[str, Any]] = Field(None, description="ğŸ” Additional metadata")

# âœ… Basic endpoint with enhanced documentation
@app.get(
    "/users/{user_id}",
    summary="ğŸ” Retrieve User by ID",
    description="""
    ## ğŸ“– Get User Information
    
    Retrieves detailed information about a specific user by their unique identifier.
    
    ### ğŸ¯ Use Cases:
    - ğŸ‘¤ **Profile Display**: Show user profile information
    - ğŸ” **User Lookup**: Administrative user search
    - ğŸ“Š **Data Validation**: Verify user existence
    
    ### âš¡ Performance Notes:
    - Response time: ~50ms
    - Cached for 5 minutes
    - Rate limit: 100 requests/minute
    
    ### ğŸ›¡ï¸ Security:
    - Requires valid authentication token
    - Users can only access their own data (unless admin)
    - Sensitive fields are automatically filtered
    """,
    response_description="âœ… User information retrieved successfully",
    response_model=APIResponse,
    tags=["ğŸ‘¤ Users"]
)
async def get_user(
    user_id: int = Path(
        ..., 
        ge=1, 
        le=999999,
        title="User ID",
        description="ğŸ†” Unique identifier for the user (1-999999)",
        example=123
    )
):
    """
    ğŸ” Retrieve user by ID with comprehensive error handling
    
    Args:
        user_id (int): User identifier within valid range
        
    Returns:
        APIResponse: Standardized response with user data
        
    Raises:
        HTTPException: 404 if user not found, 403 if unauthorized
    """
    
    # ğŸ² Mock user data (replace with database query)
    if user_id == 404:  # Simulate not found
        raise HTTPException(
            status_code=status.HTTP_404_NOT_FOUND,
            detail="ğŸ‘¤ User not found. Please check the user ID and try again."
        )
    
    mock_user = User(
        id=user_id,
        username=f"user_{user_id}",
        email=f"user{user_id}@example.com", 
        full_name=f"User {user_id}",
        is_active=True,
        created_at="2024-01-01T00:00:00Z"
    )
    
    return APIResponse(
        status="success",
        message="User information retrieved successfully",
        data=mock_user.dict(),
        meta={
            "request_id": f"req_{user_id}",
            "api_version": "2.0.0",
            "cached": True,
            "cache_expires": "2024-01-01T00:05:00Z"
        }
    )
````


### ğŸ¨ **Advanced Description with Markdown**

````python
@app.post(
    "/users/",
    summary="ğŸ‘¤ Create New User Account", 
    description="""
    ## ğŸš€ User Registration Endpoint
    
    Creates a new user account with comprehensive validation and security features.
    
    ### ğŸ“‹ Required Information:
    | Field | Type | Validation | Description |
    |-------|------|------------|-------------|
    | `username` | string | 3-50 chars, alphanumeric | ğŸ‘¤ Unique username |
    | `email` | string | Valid email format | ğŸ“§ User email address |
    | `password` | string | Min 8 chars, mixed case | ğŸ”’ Secure password |
    | `full_name` | string | Optional | ğŸ‘¨â€ğŸ’¼ Display name |
    
    ### âœ… Validation Rules:
    - **Username**: Must be unique, alphanumeric with underscores
    - **Email**: Must be valid format and not already registered  
    - **Password**: Minimum 8 characters with mixed case and numbers
    - **Rate Limiting**: Max 3 registration attempts per IP per hour
    
    ### ğŸ”„ Process Flow:
    1. **Validate Input** â†’ Check all required fields and formats
    2. **Check Uniqueness** â†’ Verify username/email not already taken
    3. **Hash Password** â†’ Secure password storage with bcrypt
    4. **Create Account** â†’ Insert user record into database
    5. **Send Welcome Email** â†’ Automated welcome message
    6. **Return Response** â†’ User data with generated ID
    
    ### ğŸ›¡ï¸ Security Features:
    - ğŸ”’ Password hashing with salt
    - ğŸ“§ Email verification required
    - ğŸš« Automatic spam detection
    - ğŸ“Š Account creation monitoring
    
    ### ğŸ“ˆ Success Response:
    Returns the created user object with a unique ID and account status.
    
    ### âš ï¸ Possible Errors:
    - `400`: Invalid input data or validation errors
    - `409`: Username or email already exists
    - `429`: Too many registration attempts
    - `500`: Server error during account creation
    """,
    response_description="ğŸ‰ User account created successfully with generated ID and welcome email sent",
    status_code=status.HTTP_201_CREATED,
    response_model=APIResponse,
    tags=["ğŸ‘¤ Users"],
    # ğŸ“Š Additional response documentation
    responses={
        201: {
            "description": "âœ… User created successfully",
            "content": {
                "application/json": {
                    "example": {
                        "status": "success",
                        "message": "User account created successfully",
                        "data": {
                            "id": 123,
                            "username": "new_user",
                            "email": "newuser@example.com",
                            "full_name": "New User",
                            "is_active": True,
                            "created_at": "2024-01-01T00:00:00Z"
                        },
                        "meta": {
                            "welcome_email_sent": True,
                            "verification_required": True
                        }
                    }
                }
            }
        },
        400: {
            "description": "âŒ Validation error",
            "content": {
                "application/json": {
                    "example": {
                        "detail": [
                            {
                                "loc": ["body", "email"],
                                "msg": "Invalid email format", 
                                "type": "value_error.email"
                            }
                        ]
                    }
                }
            }
        },
        409: {
            "description": "âš ï¸ Conflict - Username or email already exists",
            "content": {
                "application/json": {
                    "example": {
                        "status": "error",
                        "message": "Username 'john_doe' is already taken",
                        "error_code": "USERNAME_EXISTS"
                    }
                }
            }
        }
    }
)
async def create_user(user_data: UserCreate = Body(..., example={
    "username": "awesome_user",
    "email": "awesome@example.com", 
    "password": "SecurePass123!",
    "full_name": "Awesome User"
})):
    """
    ğŸ‘¤ Create new user with comprehensive validation
    
    Args:
        user_data (UserCreate): User registration information
        
    Returns:
        APIResponse: Created user data with metadata
        
    Raises:
        HTTPException: Various errors based on validation and conflicts
    """
    
    # ğŸ›¡ï¸ Simulate validation checks
    if user_data.username == "admin":
        raise HTTPException(
            status_code=status.HTTP_409_CONFLICT,
            detail="âš ï¸ Username 'admin' is reserved and cannot be used"
        )
    
    if "@test.com" in user_data.email:
        raise HTTPException(
            status_code=status.HTTP_400_BAD_REQUEST,
            detail="âŒ Test email domains are not allowed for registration"
        )
    
    # ğŸ² Create mock user (replace with database operation)
    new_user = User(
        id=12345,  # Generated ID
        username=user_data.username,
        email=user_data.email,
        full_name=user_data.full_name,
        is_active=True,
        created_at="2024-01-01T00:00:00Z"
    )
    
    return APIResponse(
        status="success",
        message="ğŸ‰ User account created successfully! Welcome email has been sent.",
        data=new_user.dict(),
        meta={
            "welcome_email_sent": True,
            "verification_required": True,
            "account_type": "standard",
            "creation_ip": "127.0.0.1"
        }
    )
````


## ğŸ”¢ **Part 3: Status Codes \& Error Handling**

### âœ… **Comprehensive Status Code Implementation**

````python
from fastapi import status

# ğŸ“Š Product models
class Product(BaseModel):
    """ğŸ“¦ Product model"""
    id: int = Field(..., description="ğŸ†” Product ID", example=1)
    name: str = Field(..., description="ğŸ“¦ Product name", example="Wireless Headphones")
    description: str = Field(..., description="ğŸ“ Product description", example="High-quality wireless headphones")
    price: float = Field(..., ge=0, description="ğŸ’° Product price", example=99.99)
    category: str = Field(..., description="ğŸ·ï¸ Product category", example="Electronics")
    in_stock: bool = Field(..., description="ğŸ“¦ Stock availability", example=True)
    stock_quantity: int = Field(..., ge=0, description="ğŸ“Š Available quantity", example=50)

# âœ… GET with 200 OK (default)
@app.get(
    "/products/",
    summary="ğŸ“¦ List All Products",
    description="""
    ## ğŸ›ï¸ Product Catalog
    
    Retrieves a paginated list of all available products with filtering options.
    
    ### ğŸ” Features:
    - ğŸ“„ **Pagination**: Control page size and offset
    - ğŸ” **Search**: Text search across product names and descriptions  
    - ğŸ·ï¸ **Category Filter**: Filter by product category
    - ğŸ’° **Price Range**: Filter by minimum and maximum price
    - ğŸ“¦ **Stock Filter**: Show only in-stock items
    
    ### ğŸ“Š Response Format:
    Returns a standardized response with product array and pagination metadata.
    """,
    response_description="ğŸ“¦ Product list retrieved successfully with pagination info",
    response_model=APIResponse,
    tags=["ğŸ“¦ Products"]
)
async def list_products(
    skip: int = Query(0, ge=0, description="ğŸ“„ Number of products to skip"),
    limit: int = Query(10, ge=1, le=100, description="ğŸ”¢ Maximum products to return"),
    search: Optional[str] = Query(None, min_length=2, description="ğŸ” Search term"),
    category: Optional[str] = Query(None, description="ğŸ·ï¸ Filter by category")
):
    # Mock products data
    mock_products = [
        Product(id=1, name="ğŸ“± iPhone 15", description="Latest smartphone", price=999.99, category="Electronics", in_stock=True, stock_quantity=25),
        Product(id=2, name="ğŸ‘• Cotton T-Shirt", description="Comfortable cotton tee", price=29.99, category="Clothing", in_stock=True, stock_quantity=100),
    ]
    
    return APIResponse(
        status="success",
        message=f"Retrieved {len(mock_products)} products",
        data={
            "products": [p.dict() for p in mock_products],
            "pagination": {
                "skip": skip,
                "limit": limit, 
                "total": len(mock_products),
                "has_more": False
            }
        }
    )

# âœ… POST with 201 CREATED
@app.post(
    "/products/",
    summary="â• Create New Product",
    description="""
    ## ğŸ†• Add Product to Catalog
    
    Creates a new product in the catalog with full validation and inventory tracking.
    
    ### ğŸ“‹ Validation Rules:
    - Product name must be unique
    - Price must be positive
    - Category must be from predefined list
    - Stock quantity cannot be negative
    """,
    response_description="ğŸ†• Product created successfully and added to catalog",
    status_code=status.HTTP_201_CREATED,
    response_model=APIResponse,
    tags=["ğŸ“¦ Products"]
)
async def create_product(product: Product):
    """â• Create new product with validation"""
    
    # Simulate product creation
    return APIResponse(
        status="success",
        message="ğŸ†• Product created successfully!",
        data=product.dict(),
        meta={
            "created_at": "2024-01-01T00:00:00Z",
            "created_by": "admin",
            "inventory_updated": True
        }
    )

# âœ… PUT with 200 OK  
@app.put(
    "/products/{product_id}",
    summary="âœï¸ Update Product",
    description="""
    ## ğŸ”„ Update Existing Product
    
    Updates an existing product with new information. All fields are optional - only provided fields will be updated.
    
    ### ğŸ¯ Update Capabilities:
    - ğŸ“ **Product Details**: Name, description, category
    - ğŸ’° **Pricing**: Update product price
    - ğŸ“¦ **Inventory**: Modify stock quantities
    - ğŸ”„ **Status**: Enable/disable product availability
    """,
    response_description="âœ… Product updated successfully",
    response_model=APIResponse,
    tags=["ğŸ“¦ Products"]
)
async def update_product(
    product_id: int = Path(..., ge=1, description="ğŸ†” Product ID to update"),
    product: Product = Body(..., description="ğŸ“ Updated product information")
):
    """âœï¸ Update existing product"""
    
    if product_id == 999:  # Simulate not found
        raise HTTPException(
            status_code=status.HTTP_404_NOT_FOUND,
            detail=f"ğŸ“¦ Product with ID {product_id} not found"
        )
    
    return APIResponse(
        status="success", 
        message="âœ… Product updated successfully",
        data=product.dict(),
        meta={
            "updated_at": "2024-01-01T00:00:00Z",
            "version": 2
        }
    )

# âœ… DELETE with 204 NO CONTENT
@app.delete(
    "/products/{product_id}",
    summary="ğŸ—‘ï¸ Delete Product",
    description="""
    ## ğŸ—‘ï¸ Remove Product from Catalog
    
    Permanently removes a product from the catalog. This action cannot be undone.
    
    ### âš ï¸ Important Notes:
    - Product must exist in the catalog
    - Cannot delete products with pending orders
    - Inventory will be automatically adjusted
    - All product reviews will be archived
    
    ### ğŸ”„ Soft Delete Option:
    Consider using PUT to set `is_active: false` instead of permanent deletion.
    """,
    response_description="ğŸ—‘ï¸ Product deleted successfully from catalog",
    status_code=status.HTTP_204_NO_CONTENT,
    tags=["ğŸ“¦ Products"]
)
async def delete_product(
    product_id: int = Path(..., ge=1, description="ğŸ†” Product ID to delete")
):
    """ğŸ—‘ï¸ Delete product from catalog"""
    
    if product_id == 999:  # Simulate not found
        raise HTTPException(
            status_code=status.HTTP_404_NOT_FOUND,
            detail=f"ğŸ“¦ Product with ID {product_id} not found"
        )
    
    # Return None for 204 status
    return None
````


### ğŸ“Š **Status Code Reference Table**

````python
# ğŸ“‹ Create comprehensive status code examples
@app.get("/status-codes/examples", include_in_schema=False)  # Hidden endpoint for reference
async def status_code_examples():
    """ğŸ“š Comprehensive status code reference"""
    return {
        "success_codes": {
            "200": "âœ… OK - Standard successful response",
            "201": "ğŸ†• Created - Resource successfully created", 
            "204": "ğŸ—‘ï¸ No Content - Successful deletion/update with no response body"
        },
        "client_error_codes": {
            "400": "âŒ Bad Request - Invalid input or malformed request",
            "401": "ğŸ” Unauthorized - Authentication required or invalid",
            "403": "ğŸš« Forbidden - Valid auth but insufficient permissions",
            "404": "ğŸ” Not Found - Requested resource does not exist",
            "409": "âš ï¸ Conflict - Resource conflict (duplicate, etc.)",
            "422": "ğŸ“ Unprocessable Entity - Validation errors",
            "429": "â±ï¸ Too Many Requests - Rate limit exceeded"
        },
        "server_error_codes": {
            "500": "ğŸ’¥ Internal Server Error - Unexpected server issue",
            "502": "ğŸŒ Bad Gateway - Upstream server error",
            "503": "ğŸ› ï¸ Service Unavailable - Server temporarily unavailable"
        }
    }
````


## ğŸ·ï¸ **Part 4: Tags \& Organization**

### ğŸ“‚ **Advanced Tag Management**

````python
# ğŸ¨ Define comprehensive tag system
class TagCategories:
    """ğŸ·ï¸ Centralized tag definitions for API organization"""
    
    # ğŸ‘¤ User Management
    USERS = "ğŸ‘¤ Users"
    AUTHENTICATION = "ğŸ” Authentication" 
    PROFILES = "ğŸ‘¨â€ğŸ’¼ User Profiles"
    
    # ğŸ“¦ Product Management
    PRODUCTS = "ğŸ“¦ Products"
    CATEGORIES = "ğŸ·ï¸ Categories"
    INVENTORY = "ğŸ“Š Inventory"
    
    # ğŸ›’ Order Processing
    ORDERS = "ğŸ›’ Orders"
    PAYMENTS = "ğŸ’³ Payments"
    SHIPPING = "ğŸ“¦ Shipping"
    
    # ğŸ”§ System & Admin
    SYSTEM = "ğŸ”§ System"
    ADMIN = "ğŸ‘‘ Admin"
    MONITORING = "ğŸ“Š Monitoring"

# ğŸ›’ Order-related endpoints with consistent tagging
@app.get(
    "/orders/",
    summary="ğŸ“‹ List User Orders",
    description="""
    ## ğŸ›’ Order History
    
    Retrieves a paginated list of orders for the authenticated user.
    Includes comprehensive order information and status tracking.
    """,
    response_description="ğŸ“‹ Order list retrieved successfully",
    tags=[TagCategories.ORDERS]
)
async def list_orders():
    return APIResponse(
        status="success",
        message="Orders retrieved successfully",
        data={"orders": [], "total": 0}
    )

@app.post(
    "/orders/",
    summary="ğŸ›’ Create New Order",
    description="""
    ## ğŸ†• Place New Order
    
    Creates a new order with selected products and shipping information.
    Handles inventory validation and payment processing.
    """,
    response_description="ğŸ›’ Order created and payment initiated",
    status_code=status.HTTP_201_CREATED,
    tags=[TagCategories.ORDERS, TagCategories.PAYMENTS]
)
async def create_order():
    return APIResponse(
        status="success",
        message="Order created successfully"
    )

# ğŸ’³ Payment processing with multiple tags
@app.post(
    "/payments/process/",
    summary="ğŸ’³ Process Payment",
    description="""
    ## ğŸ’° Payment Processing
    
    Handles secure payment processing for orders using various payment methods.
    Supports credit cards, digital wallets, and bank transfers.
    """,
    response_description="ğŸ’³ Payment processed successfully",
    tags=[TagCategories.PAYMENTS, TagCategories.ORDERS]
)
async def process_payment():
    return APIResponse(
        status="success", 
        message="Payment processed successfully"
    )

# ğŸ”§ System monitoring endpoints
@app.get(
    "/health/",
    summary="ğŸ¥ Health Check",
    description="""
    ## ğŸ¥ System Health Status
    
    Provides comprehensive system health information including:
    - Database connectivity
    - External service status  
    - System resource usage
    - Cache status
    """,
    response_description="ğŸ¥ System health status retrieved",
    tags=[TagCategories.SYSTEM, TagCategories.MONITORING]
)
async def health_check():
    return {
        "status": "âœ… healthy",
        "timestamp": "2024-01-01T00:00:00Z",
        "services": {
            "database": "âœ… connected",
            "cache": "âœ… operational", 
            "external_api": "âœ… responsive"
        }
    }
````


## ğŸ”„ **Part 5: Response Models \& Documentation Flow**

### ğŸ“Š **Advanced Response Documentation**

````python
from typing import Union

# ğŸ“Š Advanced response models with examples
class ErrorResponse(BaseModel):
    """âŒ Error response model"""
    status: str = Field("error", description="ğŸ”„ Response status")
    message: str = Field(..., description="ğŸ“ Error message")
    error_code: Optional[str] = Field(None, description="ğŸ” Machine-readable error code")
    details: Optional[Dict[str, Any]] = Field(None, description="ğŸ“‹ Additional error details")
    timestamp: str = Field(..., description="â° Error timestamp")
    request_id: str = Field(..., description="ğŸ†” Unique request identifier")

class PaginationMeta(BaseModel):
    """ğŸ“„ Pagination metadata"""
    page: int = Field(..., description="ğŸ“„ Current page number", example=1)
    per_page: int = Field(..., description="ğŸ”¢ Items per page", example=10)
    total_items: int = Field(..., description="ğŸ“Š Total available items", example=250)
    total_pages: int = Field(..., description="ğŸ“„ Total number of pages", example=25)
    has_next: bool = Field(..., description="â¡ï¸ Whether next page exists", example=True)
    has_previous: bool = Field(..., description="â¬…ï¸ Whether previous page exists", example=False)

class ProductListResponse(BaseModel):
    """ğŸ“¦ Product list response with pagination"""
    status: str = Field("success", description="âœ… Response status")
    message: str = Field(..., description="ğŸ“ Response message")
    data: Dict[str, Any] = Field(..., description="ğŸ“Š Response data")
    pagination: PaginationMeta = Field(..., description="ğŸ“„ Pagination information")

# ğŸ¯ Comprehensive endpoint with multiple response models
@app.get(
    "/products/search/",
    summary="ğŸ” Advanced Product Search",
    description="""
    ## ğŸ” Intelligent Product Search
    
    Advanced product search with multiple filters, sorting options, and intelligent ranking.
    
    ### ğŸš€ Search Features:
    
    #### ğŸ” **Search Capabilities**:
    - **Full-text search** across product names and descriptions
    - **Fuzzy matching** for typo tolerance
    - **Synonym support** for better results
    - **Auto-complete suggestions** for search terms
    
    #### ğŸ·ï¸ **Filtering Options**:
    | Filter | Type | Description |
    |--------|------|-------------|
    | `category` | string | ğŸ·ï¸ Product category filter |
    | `min_price` | number | ğŸ’° Minimum price threshold |  
    | `max_price` | number | ğŸ’° Maximum price threshold |
    | `in_stock` | boolean | ğŸ“¦ Stock availability filter |
    | `brand` | string | ğŸ¢ Brand name filter |
    | `rating` | number | â­ Minimum rating filter |
    
    #### ğŸ“Š **Sorting Options**:
    - `relevance` - ğŸ¯ Search relevance (default)
    - `price_asc` - ğŸ’° Price low to high
    - `price_desc` - ğŸ’° Price high to low  
    - `rating` - â­ Customer rating
    - `newest` - ğŸ†• Recently added
    - `popular` - ğŸ”¥ Most popular
    
    ### ğŸ“ˆ **Performance Metrics**:
    - Average response time: ~120ms
    - Search index updated every 5 minutes
    - Results cached for 1 minute
    - Maximum 1000 results per query
    
    ### ğŸ”„ **Response Format**:
    Returns paginated results with comprehensive product information and search metadata.
    """,
    response_description="ğŸ” Search results with products and metadata",
    response_model=Union[ProductListResponse, ErrorResponse],
    responses={
        200: {
            "description": "âœ… Search completed successfully",
            "model": ProductListResponse,
            "content": {
                "application/json": {
                    "example": {
                        "status": "success",
                        "message": "Found 25 products matching your search",
                        "data": {
                            "products": [
                                {
                                    "id": 1,
                                    "name": "ğŸ“± iPhone 15 Pro",
                                    "description": "Latest flagship smartphone",
                                    "price": 999.99,
                                    "category": "Electronics",
                                    "rating": 4.8,
                                    "reviews_count": 2847,
                                    "in_stock": True,
                                    "stock_quantity": 15
                                }
                            ],
                            "search_metadata": {
                                "query": "iphone",
                                "results_count": 25,
                                "search_time_ms": 87,
                                "suggestions": ["iphone case", "iphone charger"]
                            }
                        },
                        "pagination": {
                            "page": 1,
                            "per_page": 10,
                            "total_items": 25,
                            "total_pages": 3,
                            "has_next": True,
                            "has_previous": False
                        }
                    }
                }
            }
        },
        400: {
            "description": "âŒ Invalid search parameters",
            "model": ErrorResponse,
            "content": {
                "application/json": {
                    "example": {
                        "status": "error",
                        "message": "Invalid search parameters provided",
                        "error_code": "INVALID_SEARCH_PARAMS",
                        "details": {
                            "min_price": "Must be greater than 0",
                            "max_price": "Must be greater than min_price"
                        },
                        "timestamp": "2024-01-01T00:00:00Z",
                        "request_id": "req_12345"
                    }
                }
            }
        },
        429: {
            "description": "â±ï¸ Too many search requests",
            "model": ErrorResponse
        }
    },
    tags=[TagCategories.PRODUCTS, "ğŸ” Search"]
)
async def advanced_product_search(
    q: str = Query(..., min_length=2, description="ğŸ” Search query", example="wireless headphones"),
    category: Optional[str] = Query(None, description="ğŸ·ï¸ Category filter", example="Electronics"),
    min_price: Optional[float] = Query(None, ge=0, description="ğŸ’° Minimum price", example=50.0),
    max_price: Optional[float] = Query(None, ge=0, description="ğŸ’° Maximum price", example=500.0),
    sort_by: str = Query("relevance", description="ğŸ“Š Sort order", example="price_asc"),
    page: int = Query(1, ge=1, description="ğŸ“„ Page number", example=1),
    per_page: int = Query(10, ge=1, le=50, description="ğŸ”¢ Items per page", example=10)
):
    """ğŸ” Execute advanced product search with comprehensive filtering"""
    
    # Validate price range
    if min_price and max_price and min_price > max_price:
        raise HTTPException(
            status_code=status.HTTP_400_BAD_REQUEST,
            detail="âŒ Minimum price cannot be greater than maximum price"
        )
    
    # Mock search results
    return ProductListResponse(
        status="success",
        message=f"ğŸ” Found products matching '{q}'",
        data={
            "products": [
                {
                    "id": 1,
                    "name": "ğŸ§ Wireless Headphones Pro", 
                    "description": "Premium noise-canceling headphones",
                    "price": 299.99,
                    "category": "Electronics",
                    "rating": 4.7,
                    "in_stock": True
                }
            ],
            "search_metadata": {
                "query": q,
                "results_count": 1,
                "search_time_ms": 95,
                "filters_applied": {
                    "category": category,
                    "price_range": f"{min_price}-{max_price}" if min_price or max_price else None
                }
            }
        },
        pagination=PaginationMeta(
            page=page,
            per_page=per_page,
            total_items=1,
            total_pages=1,
            has_next=False,
            has_previous=False
        )
    )
````


## ğŸ¯ **Part 6: Testing Documentation Features**

### ğŸ§ª **Interactive Documentation Testing**

````python
# ğŸ§ª Test endpoint specifically for documentation features
@app.get(
    "/docs-demo/",
    summary="ğŸ“š Documentation Feature Demo",
    description="""
    ## ğŸ¯ Documentation Features Showcase
    
    This endpoint demonstrates all FastAPI documentation features in action:
    
    ### ğŸ“ **Supported Features**:
    
    #### âœ… **Basic Features**:
    - [x] Custom summary and description
    - [x] Response descriptions
    - [x] Status code documentation
    - [x] Tag organization
    - [x] Parameter validation
    
    #### ğŸš€ **Advanced Features**:
    - [x] Multiple response models
    - [x] Custom examples
    - [x] Markdown formatting
    - [x] External documentation links
    - [x] Deprecation warnings
    
    ### ğŸ”— **External Resources**:
    - [FastAPI Documentation](https://fastapi.tiangolo.com/)
    - [OpenAPI Specification](https://swagger.io/specification/)
    - [JSON Schema](https://json-schema.org/)
    
    ### âš ï¸ **Important Notes**:
    > This is a demo endpoint showing documentation capabilities.
    > In production, ensure all endpoints have proper documentation.
    
    ### ğŸ“Š **Code Example**:
    ```
    @app.get("/example", summary="Example", description="Demo endpoint")
    async def example():
        return {"message": "Hello World"}
    ```
    """,
    response_description="ğŸ“š Documentation demo response with examples",
    response_model=APIResponse,
    tags=["ğŸ“š Documentation", TagCategories.SYSTEM],
    # ğŸ”— External documentation
    openapi_extra={
        "externalDocs": {
            "description": "FastAPI Documentation Guide",
            "url": "https://fastapi.tiangolo.com/tutorial/metadata/"
        }
    }
)
async def documentation_demo(
    demo_param: str = Query("example", description="ğŸ“ Demo parameter with example", example="demo_value"),
    optional_param: Optional[int] = Query(None, ge=1, le=100, description="ğŸ”¢ Optional number parameter")
):
    """ğŸ“š Demonstrate documentation features"""
    
    return APIResponse(
        status="success",
        message="ğŸ“š Documentation demo executed successfully",
        data={
            "demo_param": demo_param,
            "optional_param": optional_param,
            "features_demonstrated": [
                "âœ… Rich markdown descriptions",
                "ğŸ·ï¸ Tag organization", 
                "ğŸ“Š Response models",
                "ğŸ” Parameter validation",
                "ğŸ“ Custom examples",
                "ğŸ”— External documentation links"
            ]
        },
        meta={
            "documentation_version": "2.0.0",
            "openapi_version": "3.0.2"
        }
    )

# ğŸš€ Run the application
if __name__ == "__main__":
    uvicorn.run(
        "main:app",
        host="0.0.0.0", 
        port=8000,
        reload=True,
        log_level="info"
    )
````


## ğŸ“Š **Complete Features Summary**

### ğŸ¯ **Documentation Enhancement Checklist**

| Feature | Usage | Benefits | Example |
| :-- | :-- | :-- | :-- |
| **ğŸ“ Summary** | `summary="Brief title"` | Concise endpoint titles | "Create User Account" |
| **ğŸ“– Description** | `description="""Markdown text"""` | Detailed explanations | Rich formatted docs |
| **âœ… Response Description** | `response_description="Success message"` | Clear success outcomes | "User created successfully" |
| **ğŸ”¢ Status Codes** | `status_code=status.HTTP_201_CREATED` | Proper HTTP semantics | 201 for creation |
| **ğŸ·ï¸ Tags** | `tags=["Users", "Admin"]` | API organization | Grouped endpoints |
| **ğŸ“Š Response Models** | `response_model=UserResponse` | Structured responses | Type safety |
| **ğŸ” Examples** | `example={"key": "value"}` | Clear usage patterns | Interactive docs |
| **âš ï¸ Error Responses** | `responses={400: {...}}` | Error documentation | Comprehensive error info |

### ğŸš€ **Best Practices Quick Reference**

````python
# âœ… GOOD: Comprehensive documentation
@app.post(
    "/users/",
    summary="ğŸ‘¤ Create User",  # Clear, concise title
    description="""
    ## ğŸš€ User Registration
    
    Creates a new user account with validation.
    
    ### Requirements:
    - Unique username
    - Valid email format
    - Strong password (8+ chars)
    """,  # Rich markdown description
    response_description="âœ… User created with ID",  # Clear success message
    status_code=status.HTTP_201_CREATED,  # Appropriate status
    response_model=APIResponse,  # Structured response
    tags=["ğŸ‘¤ Users"]  # Logical grouping
)
async def create_user(user: UserCreate):
    """Docstring for IDE support"""
    pass

# âŒ BAD: Minimal documentation
@app.post("/users/")
async def create_user(user: UserCreate):
    pass
````

This comprehensive guide provides everything you need to create professional, well-documented FastAPI applications that are developer-friendly and easy to understand! ğŸ‰

